"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[9872],{5680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>h});var r=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},g="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,d=c(e,["components","mdxType","originalType","parentName"]),g=s(n),p=o,h=g["".concat(l,".").concat(p)]||g[p]||u[p]||a;return n?r.createElement(h,i(i({ref:t},d),{},{components:n})):r.createElement(h,i({ref:t},d))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=p;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[g]="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},5738:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>c,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>d});var r=n(8168),o=(n(6540),n(5680)),a=n(6025);const i={id:"09-recording-controls",title:"Recording Controls"},c=void 0,l={unversionedId:"lightning/cti-adapter/09-recording-controls",id:"lightning/cti-adapter/09-recording-controls",title:"Recording Controls",description:"Recording Controls panel in the CCP Overlay allows your agents to control the recording behavior of the call.",source:"@site/docs/lightning/03-cti-adapter/09-recording-controls.md",sourceDirName:"lightning/03-cti-adapter",slug:"/lightning/cti-adapter/09-recording-controls",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/03-cti-adapter/09-recording-controls.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{id:"09-recording-controls",title:"Recording Controls"},sidebar:"lightning",previous:{title:"CTI Actions",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions"},next:{title:"Voicemail Drops",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops"}},s={},d=[{value:"Setup",id:"setup",level:2},{value:"Using Recording Controls with Contact Flows",id:"using-recording-controls-with-contact-flows",level:2},{value:"Recording Named Credential",id:"recording-named-credential",level:2},{value:"Synchronizing Recording State with Contact Attributes",id:"synchronizing-recording-state-with-contact-attributes",level:2}],g={toc:d},u="wrapper";function p(e){let{components:t,...n}=e;return(0,o.yg)(u,(0,r.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Recording Controls panel in the CCP Overlay allows your agents to control the recording behavior of the call."),(0,o.yg)("img",{src:(0,a.A)("/img/shared/ccp-overlay-5-recording.png")}),(0,o.yg)("p",null,"This can be useful when you don't want to record every call, and give the agent the ability to pause and resume a recording."),(0,o.yg)("p",null,"Note that once a recording is stopped, it cannot be restarted. After starting a recording, you should use pause/resume button to control it."),(0,o.yg)("p",null,"This panel is disabled by default. You can enable it by adding ",(0,o.yg)("inlineCode",{parentName:"p"},"FEATURE_RECORDING_PANEL")," feature flag to your CTI Adapter, with the setting ",(0,o.yg)("inlineCode",{parentName:"p"},"Enabled:true"),"."),(0,o.yg)("h2",{id:"setup"},"Setup"),(0,o.yg)("p",null,"First, create an IAM user and give it the managed policy ",(0,o.yg)("inlineCode",{parentName:"p"},"AmazonConnect_FullAccess"),"."),(0,o.yg)("img",{src:(0,a.A)("/img/shared/ccp-overlay-7-iam.png")}),(0,o.yg)("p",null,'Copy the access key and secret of this user (from the "Security credentials" tab.) Next, go to your Salesforce instance Setup section. Search for Named Credentials in the left sidebar, and create a new credential named ',(0,o.yg)("inlineCode",{parentName:"p"},"AmazonConnectAPI"),". (The name and the label should be identical.)"),(0,o.yg)("img",{src:(0,a.A)("/img/shared/ccp-overlay-6-named-credentials.png")}),(0,o.yg)("p",null,"Fill in ",(0,o.yg)("inlineCode",{parentName:"p"},"https://connect.{region}.amazonaws.com")," as the url. The region in the url needs to match the region for your connect instance / CTI Adapter, so if the CTI Adapter region is ",(0,o.yg)("inlineCode",{parentName:"p"},"us-west-2"),", your url should be: ",(0,o.yg)("inlineCode",{parentName:"p"},"https://connect.us-west-2.amazonaws.com")),(0,o.yg)("p",null,'For Identity Type, select "Named Principal" and for "Authentication Protocol" select "AWS Signature Version 4." Then fill in the "AWS Access Key Id" and "AWS Access Secret" fields with your IAM user credentials. And for AWS Region, use the region of your Connect instance. And for the AWS Service, fill in ',(0,o.yg)("inlineCode",{parentName:"p"},"connect"),"."),(0,o.yg)("h2",{id:"using-recording-controls-with-contact-flows"},"Using Recording Controls with Contact Flows"),(0,o.yg)("p",null,"This feature can sometimes cause issues if an existing contact flow manages call recording, which is common with Contact Lens. If you\u2019re using this feature with Contact Channel Analytics or Contact Trace Records enabled, make sure your amazon connect contact flow does not enable call recording by default. If you still wish to generate Contact Channel Analytics / Contact Trace Records, then you should disable call recording in the contact flow block and leave the other settings the same. For reference, here is a valid configuration with Contact Lens and CTR enabled:"),(0,o.yg)("img",{src:(0,a.A)("/img/lightning/recordingcontrolscontactflows1.png")}),(0,o.yg)("img",{src:(0,a.A)("/img/lightning/recordingcontrolscontactflows2.png")}),(0,o.yg)("h2",{id:"recording-named-credential"},"Recording Named Credential"),(0,o.yg)("p",null,'Starting with version v5.23.3, you now have an area in the CTI Adapter to specify the recording Named Credential you wish to use with the adapter. Follow the instructions in the "Setup" section above to create the Named Credentials. Once you have the names for the Named Credentials, add them directly to the Adapters you wish to use.'),(0,o.yg)("p",null,(0,o.yg)("strong",{parentName:"p"}," CTI Adapter Named Credential Location: ")," "),(0,o.yg)("img",{src:(0,a.A)("/img/lightning/ctiadapterGR-1.png")}),(0,o.yg)("p",null,'Note: In v5.22+, if you have "Recording Controls" enabled and you do not explicitly set a Named Credential on the CTI Adapter, it will assume "AmazonConnectAPI" by default.'),(0,o.yg)("h2",{id:"synchronizing-recording-state-with-contact-attributes"},"Synchronizing Recording State with Contact Attributes"),(0,o.yg)("p",null,"The Connect API does not provide a way for us to check that the recording has already been started when a call is answered. This may result in the UI panel falling out of sync with the actual state of the contact. If you have configured your contacts to be recorded automatically, using the Contact Flow, you must take care to add a contact attribute to indicate that:"),(0,o.yg)("blockquote",null,(0,o.yg)("p",{parentName:"blockquote"},"Attribute Name: RECORDING_STARTED\nAttribute Value: true")),(0,o.yg)("p",null,"If you have configured this attribute, then the recording controls will be in sync with the recording state."))}p.isMDXComponent=!0}}]);