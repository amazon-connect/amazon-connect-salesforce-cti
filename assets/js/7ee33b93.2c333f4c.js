"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[7336],{4880:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>y,frontMatter:()=>i,metadata:()=>c,toc:()=>p});var a=n(8168),o=(n(6540),n(5680)),r=n(6025);const i={id:"06-postcall-contact-lens-import",title:"Postcall Contact Lens Import"},l=void 0,c={unversionedId:"lightning/salesforce-lambdas/06-postcall-contact-lens-import",id:"lightning/salesforce-lambdas/06-postcall-contact-lens-import",title:"Postcall Contact Lens Import",description:"Contact Lens for Amazon Connect is a set of machine learning (ML) capabilities integrated into Amazon Connect. With Contact Lens for Amazon Connect, contact center supervisors can better understand the sentiment, trends, and compliance of customer conversions to effectively train agents, replicate successful interactions, and identify crucial company and product feedback.",source:"@site/docs/lightning/04-salesforce-lambdas/06-postcall-contact-lens-import.md",sourceDirName:"lightning/04-salesforce-lambdas",slug:"/lightning/salesforce-lambdas/06-postcall-contact-lens-import",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/04-salesforce-lambdas/06-postcall-contact-lens-import.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{id:"06-postcall-contact-lens-import",title:"Postcall Contact Lens Import"},sidebar:"lightning",previous:{title:"Contact Trace Record Import",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import"},next:{title:"Configuring My Domain in Salesforce",permalink:"/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain"}},s={},p=[{value:"Contact Lens Import",id:"contact-lens-import",level:3},{value:"Creating the AWS Lambda Trigger for the Contact Lens Data",id:"creating-the-aws-lambda-trigger-for-the-contact-lens-data",level:4},{value:"Enabling Contact Lens Import",id:"enabling-contact-lens-import",level:4}],g={toc:p},m="wrapper";function y(e){let{components:t,...n}=e;return(0,o.yg)(m,(0,a.A)({},g,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Contact Lens for Amazon Connect is a set of machine learning (ML) capabilities integrated into Amazon Connect. With Contact Lens for Amazon Connect, contact center supervisors can better understand the sentiment, trends, and compliance of customer conversions to effectively train agents, replicate successful interactions, and identify crucial company and product feedback. "),(0,o.yg)("p",null,"Contact Lens are available within your Amazon Connect instance in CTR page, and Contact Lens data are stored in Amazon Connect S3 bucket. With the AWS Serverless Application for Salesforce (Amazon Connect Salesforce Lambda), you can import Contact Lens data into your Salesforce org. "),(0,o.yg)("h3",{id:"contact-lens-import"},"Contact Lens Import"),(0,o.yg)("p",null,"Before using AWS Serverless Application (Amazon Connect Salesforce Lambda) to import Contact Lens data, you need to enable Contact Lens in Amazon Connect. More information can be found at ",(0,o.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/connect/latest/adminguide/enable-analytics.html"},"https://docs.aws.amazon.com/connect/latest/adminguide/enable-analytics.html"),"."),(0,o.yg)("p",null,"Once enabled during the installation of AWS Serverless Application (Amazon Connect Salesforce Lambda), Contact Lens import is activated on a call by call basis by adding a specific contact attribute. This attribute is used during Contact Lens processing to trigger the import task."),(0,o.yg)("h4",{id:"creating-the-aws-lambda-trigger-for-the-contact-lens-data"},"Creating the AWS Lambda Trigger for the Contact Lens Data"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Make sure you set ",(0,o.yg)("strong",{parentName:"p"},"ContactLensImportEnabled")," to ",(0,o.yg)("strong",{parentName:"p"},"true")," during the deployment of Amazon Connect Salesforce Lambda application.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Once the deployment is finished, you need to configure a trigger that invokes a Lambda function when Contact Lens output file is generated and stored in S3.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In a browser tab, login to the ",(0,o.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/"},"AWS Console"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Open the ",(0,o.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/lambda/home"},"AWS Lambda Console"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the filter field of the AWS Lambda console, enter sfProcessContactLens and press enter to filter the list of functions.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select the Lambda that includes sfProcessContactLens in the name.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Expand the Designer section.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select Add trigger"))),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/contactlenslambda-1.png")}),(0,o.yg)("ol",{start:9},(0,o.yg)("li",{parentName:"ol"},"In Trigger configuration, select S3 from the dropdown list")),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/image188.png")}),(0,o.yg)("ol",{start:10},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select the bucket of your Amazon Connect instace. You can find your Amazon Connect bucket name by clicking on your Amazon Connect instance alias in Amazon Connect console.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Change the Event type to PUT.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Set the Prefix to ",(0,o.yg)("strong",{parentName:"p"},"Analysis/Voice/2020"),". Note that this might change as the date changes so you will need to update this on the first day of every new year. ")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Set the Suffix to .json")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"The trigger configuration should now be similar to the following:"))),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/contactlenslambda-2.png")}),(0,o.yg)("ol",{start:15},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select ",(0,o.yg)("strong",{parentName:"p"},"Add"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If everything has been configured correctly, you should received a success message. "))),(0,o.yg)("h4",{id:"enabling-contact-lens-import"},"Enabling Contact Lens Import"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Login to your Amazon Connect instance as an Administrator")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"From the left navigation, choose ",(0,o.yg)("strong",{parentName:"p"},"Routing")," then select ",(0,o.yg)("strong",{parentName:"p"},"Contact         flows")))),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/image201.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Open the contact flow that you want to use to enable Contact Lens\nimport.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In you contact flow, before you transfer to queue, add a new ",(0,o.yg)("strong",{parentName:"p"},"Set\ncontact attributes")," block")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Configure the block to set a few contact attributes:"),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("p",{parentName:"li"},"To turn on Contact Lens data import, set ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"contactLensImportEnabled"))," to ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"true")),"."),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/contactlensattributes-1.png")})),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("p",{parentName:"li"},"For recording import, there are two options: original call recording and redacted call recording. ",(0,o.yg)("strong",{parentName:"p"},"Note that you can only import one of the recordings for each contact.")),(0,o.yg)("ul",{parentName:"li"},(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("p",{parentName:"li"},"To turn on original recording import, set ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"postcallRecordingImportEnabled"))," to ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"true"))),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/contactlensattributes-2.png")})),(0,o.yg)("li",{parentName:"ul"},(0,o.yg)("p",{parentName:"li"},"To turn on redacted recording import, set ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"postcallRedactedRecordingImportEnabled"))," to ",(0,o.yg)("strong",{parentName:"p"},(0,o.yg)("em",{parentName:"strong"},"true"))),(0,o.yg)("img",{src:(0,r.A)("/img/lightning/contactlensattributes-3.png")})))))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},(0,o.yg)("strong",{parentName:"p"},"Save")," the Set contact attributes block. Make sure it is\nappropriately connected to your contact flow, and ",(0,o.yg)("strong",{parentName:"p"},"Publish")," the\nflow.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Wait approximately 2 minutes to give the contact flow time to\npublish.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Place a call, connect to your agent, speak for a few moments, then\nend the call. Make sure the agent exits after call work")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"The Contact Lens data is emitted a couple of minutes after call            completion and the import happens almost immediately."))))}y.isMDXComponent=!0},5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>d});var a=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},g="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},y=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),g=s(n),y=o,d=g["".concat(c,".").concat(y)]||g[y]||m[y]||r;return n?a.createElement(d,i(i({ref:t},p),{},{components:n})):a.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=y;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[g]="string"==typeof e?e:o,i[1]=l;for(var s=2;s<r;s++)i[s]=n[s];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}y.displayName="MDXCreateElement"}}]);