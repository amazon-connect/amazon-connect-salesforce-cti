"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[9957],{5680:(e,t,a)=>{a.d(t,{xA:()=>p,yg:()=>h});var o=a(6540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function n(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,o,i=function(e,t){if(null==e)return{};var a,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)a=r[o],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=o.createContext({}),c=function(e){var t=o.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):n(n({},t),e)),a},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},g="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),g=c(a),u=i,h=g["".concat(l,".").concat(u)]||g[u]||d[u]||r;return a?o.createElement(h,n(n({ref:t},p),{},{components:a})):o.createElement(h,n({ref:t},p))}));function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,n=new Array(r);n[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[g]="string"==typeof e?e:i,n[1]=s;for(var c=2;c<r;c++)n[c]=a[c];return o.createElement.apply(null,n)}return o.createElement.apply(null,a)}u.displayName="MDXCreateElement"},5718:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>u,frontMatter:()=>n,metadata:()=>l,toc:()=>p});var o=a(8168),i=(a(6540),a(5680)),r=a(6025);const n={id:"06-cti-adapter-installation-troubleshooting",title:"CTI Adapter Installation Troubleshooting and Common Issues"},s=void 0,l={unversionedId:"classic/installation/06-cti-adapter-installation-troubleshooting",id:"classic/installation/06-cti-adapter-installation-troubleshooting",title:"CTI Adapter Installation Troubleshooting and Common Issues",description:"I upgraded my adapter to v5.10, but I cannot see the CCP Config changes",source:"@site/docs/classic/02-installation/06-cti-adapter-installation-troubleshooting.md",sourceDirName:"classic/02-installation",slug:"/classic/installation/06-cti-adapter-installation-troubleshooting",permalink:"/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/classic/02-installation/06-cti-adapter-installation-troubleshooting.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{id:"06-cti-adapter-installation-troubleshooting",title:"CTI Adapter Installation Troubleshooting and Common Issues"},sidebar:"classic",previous:{title:"Upgrading from an Earlier Version",permalink:"/amazon-connect-salesforce-cti/docs/classic/installation/05-upgrading-from-an-earlier-version"},next:{title:"CTI Adapter Configuration",permalink:"/amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration"}},c={},p=[{value:"I upgraded my adapter to v5.10, but I cannot see the CCP Config changes",id:"i-upgraded-my-adapter-to-v510-but-i-cannot-see-the-ccp-config-changes",level:4},{value:"Error \u201crefused to run the JavaScript URL because it violates the following Content Security Policy directive...\u201d",id:"error-refused-to-run-the-javascript-url-because-it-violates-the-following-content-security-policy-directive",level:4},{value:"Error \u201crefused to frame\u201d Visualforce page",id:"error-refused-to-frame-visualforce-page",level:4},{value:"I upgraded my adapter to v5, but I don\u2019t see the CTI Flows feature.",id:"i-upgraded-my-adapter-to-v5-but-i-dont-see-the-cti-flows-feature",level:4},{value:"I upgraded my adapter from v3 to v5 and we lost some screenpop functionality.",id:"i-upgraded-my-adapter-from-v3-to-v5-and-we-lost-some-screenpop-functionality",level:4},{value:"Certain picklists are missing picklist items.",id:"certain-picklists-are-missing-picklist-items",level:4},{value:"How to remove permissions to Visualforce pages, Apex classes for a desired profile",id:"how-to-remove-permissions-to-visualforce-pages-apex-classes-for-a-desired-profile",level:4},{value:"Browser refreshing when trying to open lightning components",id:"browser-refreshing-when-trying-to-open-lightning-components",level:3},{value:"How do you fix it?",id:"how-do-you-fix-it",level:4},{value:"Why does this happen?",id:"why-does-this-happen",level:4},{value:"What are the Disable X Trigger options in the Custom Settings?",id:"what-are-the-disable-x-trigger-options-in-the-custom-settings",level:4}],g={toc:p},d="wrapper";function u(e){let{components:t,...a}=e;return(0,i.yg)(d,(0,o.A)({},g,a,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h4",{id:"i-upgraded-my-adapter-to-v510-but-i-cannot-see-the-ccp-config-changes"},"I upgraded my adapter to v5.10, but I cannot see the CCP Config changes"),(0,i.yg)("p",null,"There is a bug with Salesforce that doesn't update a page layout when you upgrade a package. To fix this, go to Setup and search for ",(0,i.yg)("inlineCode",{parentName:"p"},"Objects")," and click the option under ",(0,i.yg)("inlineCode",{parentName:"p"},"Create"),". Once you're on the Custom Object page, search for the ",(0,i.yg)("inlineCode",{parentName:"p"},"AC CTI Adapter")," object and click on it. Then go into ",(0,i.yg)("inlineCode",{parentName:"p"},"Page Layouts")," and click ",(0,i.yg)("inlineCode",{parentName:"p"},"Edit")," on the layout you are using (Typically ",(0,i.yg)("inlineCode",{parentName:"p"},"AC CTI Adapter Layout - August 2020"),").  Then, drag and drop the ",(0,i.yg)("inlineCode",{parentName:"p"},"Audio Device Settings")," and ",(0,i.yg)("inlineCode",{parentName:"p"},"Page Layout Settings")," into the desired spot on the page. Finally hit save."),(0,i.yg)("img",{src:(0,r.A)("/img/lightning/troubleshooting2.png")}),(0,i.yg)("h4",{id:"error-refused-to-run-the-javascript-url-because-it-violates-the-following-content-security-policy-directive"},"Error \u201crefused to run the JavaScript URL because it violates the following Content Security Policy directive...\u201d"),(0,i.yg)("p",null,"This is an allowlisting issue, please review the installation and ensure that both URLs are properly allowlisted."),(0,i.yg)("h4",{id:"error-refused-to-frame-visualforce-page"},"Error \u201crefused to frame\u201d Visualforce page"),(0,i.yg)("img",{src:(0,r.A)("/img/classic/troubleshooting0.png")}),(0,i.yg)("p",null,"This can happen if the customer has checked \u201cEnable clickjack protection\u201d on Salesforce session settings. The solution is to uncheck that. "),(0,i.yg)("img",{src:(0,r.A)("/img/classic/troubleshooting1.png")}),(0,i.yg)("h4",{id:"i-upgraded-my-adapter-to-v5-but-i-dont-see-the-cti-flows-feature"},"I upgraded my adapter to v5, but I don\u2019t see the CTI Flows feature."),(0,i.yg)("p",null,"See the ",(0,i.yg)("a",{parentName:"p",href:"/docs/classic/installation/05-upgrading-from-an-earlier-version"},"Upgrading from an Earlier Version")," section of the installation guide."),(0,i.yg)("h4",{id:"i-upgraded-my-adapter-from-v3-to-v5-and-we-lost-some-screenpop-functionality"},"I upgraded my adapter from v3 to v5 and we lost some screenpop functionality."),(0,i.yg)("p",null,"All screenpop functionality native to v3 now needs to be recreated using CTI Flows. Please review the ",(0,i.yg)("a",{parentName:"p",href:"/docs/classic/appendices/appendix-c-cti-flow-examples/01-cti-flow-examples"},"CTI Flow Examples")," for more details, all screenpop functionality from v3 has been recreated."),(0,i.yg)("h4",{id:"certain-picklists-are-missing-picklist-items"},"Certain picklists are missing picklist items."),(0,i.yg)("p",null,"When upgrading from a version of the package to a higher version of the package in which new picklist items were added to a picklist, those new picklist items won't be installed. This is a ",(0,i.yg)("a",{parentName:"p",href:"https://salesforce.stackexchange.com/questions/207367/i-have-a-managed-package-if-i-add-values-a-picklist-will-my-customers-get-it-o"},"known Salesforce issue"),"."),(0,i.yg)("h4",{id:"how-to-remove-permissions-to-visualforce-pages-apex-classes-for-a-desired-profile"},"How to remove permissions to Visualforce pages, Apex classes for a desired profile"),(0,i.yg)("ol",null,(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Navigate to ",(0,i.yg)("strong",{parentName:"p"},"Setup"),' and search for "Profiles".')),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Select the desired profile.")),(0,i.yg)("li",{parentName:"ol"},(0,i.yg)("p",{parentName:"li"},"Select either ",(0,i.yg)("strong",{parentName:"p"},"Visualforce Page Access")," or ",(0,i.yg)("strong",{parentName:"p"},"Apex Class Access"),"."))),(0,i.yg)("img",{src:(0,r.A)("/img/shared/removepermissionstroublshooting0.png")}),(0,i.yg)("ol",{start:4},(0,i.yg)("li",{parentName:"ol"},"Select ",(0,i.yg)("strong",{parentName:"li"},"Edit")," and remove any desired permissions. All permissions can be removed because permissions are managed through permission sets, not through profiles.")),(0,i.yg)("h3",{id:"browser-refreshing-when-trying-to-open-lightning-components"},"Browser refreshing when trying to open lightning components"),(0,i.yg)("p",null,"This issue was first seen when trying to use the screenPop() method provided by Salesforce (this is the method we use for our Screenpop CTI Flow blocks)."),(0,i.yg)("h4",{id:"how-do-you-fix-it"},"How do you fix it?"),(0,i.yg)("p",null,'Remove the "&0.source=aloha" value from the browser. This can often be added to the current URL when a Salesforce page is navigated through the use of a bookmark.'),(0,i.yg)("h4",{id:"why-does-this-happen"},"Why does this happen?"),(0,i.yg)("p",null,"The cause of this issue is correlated with the presence of \u201c&0.source=aloha\u201d in the home page URL after logging into Salesforce. For context on what this value means, you can consult ",(0,i.yg)("a",{parentName:"p",href:"https://salesforce.stackexchange.com/questions/187349/forcenavigatetourl-inserts-source-aloha-in-the-url-which-breaks-page"},"this reference"),". This code is set by Salesforce to forcefully navigate a user to a url, which is needed in cases when a user tries to navigate to a salesforce page that can only be viewed by a logged in user. After logging in, this code is still present, and this is why this issue occurs. When this value is present, opening new tabs would result in the entire browser refreshing because it's still forcefully trying to navigate the user. This browser refresh eventually converts incoming calls to missed calls, which is the expected behavior while using the CTI Adapter."),(0,i.yg)("h4",{id:"what-are-the-disable-x-trigger-options-in-the-custom-settings"},"What are the Disable X Trigger options in the Custom Settings?"),(0,i.yg)("img",{src:(0,r.A)("/img/lightning/troubleshooting4.png")}),(0,i.yg)("p",null,"These are options we provide that allow you to toggle certain functionality in the adapter."),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"CCA Case Trigger - This trigger looks for any ContactChannelAnalytics records that could be related to a updated/inserted Case, and creates a relationsihp between the two records. This trigger uses batching to process the update requests."),(0,i.yg)("li",{parentName:"ul"},"CCA Contact Trigger - This trigger looks for any ContactChannelAnalytics records that could be related to a updated/inserted Contact, and creates a relationsihp between the two records. This trigger uses batching to process the update requests."),(0,i.yg)("li",{parentName:"ul"},"Case Contact CCA Trigger - This trigger looks for any Case/Contact records that could be related to an updated/inserted ContactChannelAnalytics record, and creates a relationsihp between the records."),(0,i.yg)("li",{parentName:"ul"},"Task Trigger - This trigger creates a ContactChannel record for any inserted/updated task that with a ",(0,i.yg)("inlineCode",{parentName:"li"},"CallObject")," field that does not currently have a ContactChannel record created before.")))}u.isMDXComponent=!0}}]);