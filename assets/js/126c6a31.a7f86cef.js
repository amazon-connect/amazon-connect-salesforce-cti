"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[6128],{5680:(e,t,n)=>{n.d(t,{xA:()=>p,yg:()=>y});var a=n(6540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),s=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=s(e.components);return a.createElement(l.Provider,{value:t},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,p=g(e,["components","mdxType","originalType","parentName"]),c=s(n),h=o,y=c["".concat(l,".").concat(h)]||c[h]||m[h]||i;return n?a.createElement(y,r(r({ref:t},p),{},{components:n})):a.createElement(y,r({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=h;var g={};for(var l in t)hasOwnProperty.call(t,l)&&(g[l]=t[l]);g.originalType=e,g[c]="string"==typeof e?e:o,r[1]=g;for(var s=2;s<i;s++)r[s]=n[s];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},9636:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>g,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>p});var a=n(8168),o=(n(6540),n(5680)),i=n(6025);const r={id:"03-managed-package-manual-setup",title:"Setting Up The CTI Adapter Managed Package Manually"},g=void 0,l={unversionedId:"lightning/installation/03-managed-package-manual-setup",id:"lightning/installation/03-managed-package-manual-setup",title:"Setting Up The CTI Adapter Managed Package Manually",description:"Below are manual setup instructions for the Salesforce CTI Adapter Managed Package. After following the below steps, be sure to follow the instructions for setting up the Salesforce Lambdas here.",source:"@site/docs/lightning/02-installation/03-managed-package-manual-setup.md",sourceDirName:"lightning/02-installation",slug:"/lightning/installation/03-managed-package-manual-setup",permalink:"/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/02-installation/03-managed-package-manual-setup.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"03-managed-package-manual-setup",title:"Setting Up The CTI Adapter Managed Package Manually"},sidebar:"lightning",previous:{title:"Setting Up The CTI Adapter Using Guided Setup",permalink:"/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup"},next:{title:"Setting Up The Salesforce Lambdas Manually",permalink:"/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup"}},s={},p=[{value:"Set Access Permissions",id:"set-access-permissions",level:3},{value:"AC_Administrator",id:"ac_administrator",level:4},{value:"AC_Manager",id:"ac_manager",level:4},{value:"AC_Agent",id:"ac_agent",level:4},{value:"Configure the Lightning Experience",id:"configure-the-lightning-experience",level:3},{value:"Configure Service Console",id:"configure-service-console",level:4},{value:"Allowlist Your Salesforce Org with Amazon Connect",id:"allowlist-your-salesforce-org-with-amazon-connect",level:4},{value:"Modify the Call Center",id:"modify-the-call-center",level:4},{value:"Configure the Toolkit settings",id:"configure-the-toolkit-settings",level:4},{value:"These are options we provide that allow you to toggle certain functionality in the adapter.",id:"these-are-options-we-provide-that-allow-you-to-toggle-certain-functionality-in-the-adapter",level:4},{value:"Configure the Scheduler for Batch processing for triggers",id:"configure-the-scheduler-for-batch-processing-for-triggers",level:5},{value:"Create the Softphone Layout",id:"create-the-softphone-layout",level:4},{value:"Initial CTI Adapter Configuration",id:"initial-cti-adapter-configuration",level:3},{value:"Add the CTI Adapter Console App",id:"add-the-cti-adapter-console-app",level:4},{value:"Enhanced Agent Logout",id:"enhanced-agent-logout",level:4},{value:"Validate Basic Screenpop",id:"validate-basic-screenpop",level:4}],c={toc:p},m="wrapper";function h(e){let{components:t,...n}=e;return(0,o.yg)(m,(0,a.A)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"Below are manual setup instructions for the Salesforce CTI Adapter Managed Package. After following the below steps, be sure to follow the instructions for setting up the Salesforce Lambdas ",(0,o.yg)("a",{parentName:"p",href:"/docs/lightning/installation/04-salesforce-lambdas-manual-setup"},"here"),"."),(0,o.yg)("p",null,"When installing v5.15, please ",(0,o.yg)("strong",{parentName:"p"},"confirm that the application was installed for admins only")," (see ",(0,o.yg)("a",{parentName:"p",href:"/docs/lightning/installation/01-installation"},"installation")," for more details). If you did this by accident, then you will have to ",(0,o.yg)("a",{parentName:"p",href:"/docs/lightning/installation/06-adapter-installation-troubleshooting#how-to-remove-permissions-to-visualforce-pages-apex-classes-for-a-desired-profile"},"manually edit the profiles")," to remove the permissions to the objects and pages created by the app."),(0,o.yg)("h3",{id:"set-access-permissions"},"Set Access Permissions"),(0,o.yg)("p",null,"All users must be assigned the required permission set to access\nSalesforce metadata. The Amazon Connect CTI Adapter includes two\nPermission Sets, one for agents and one for managers, that grant users\nthe appropriate access for their role. More information on assigning\nuser permissions can be found in the ",(0,o.yg)("a",{parentName:"p",href:"https://help.salesforce.com/articleView?id=perm_sets_mass_assign.htm&type=5"},"Salesforce help\ndocumentation"),"."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,o.yg)("strong",{parentName:"p"},"Setup"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In ",(0,o.yg)("strong",{parentName:"p"},"Quick Find"),", enter ",(0,o.yg)("strong",{parentName:"p"},"Permission")," and select ",(0,o.yg)("strong",{parentName:"p"},"Permission\nSets")," from the results")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Choose ",(0,o.yg)("strong",{parentName:"p"},"AC_Administrator"),", ",(0,o.yg)("strong",{parentName:"p"},"AC_Agent")," or ",(0,o.yg)("strong",{parentName:"p"},"AC_Manager")," as\nappropriate for the user(s)"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image12.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Choose ",(0,o.yg)("strong",{parentName:"p"},"Manage Assignments"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Choose ",(0,o.yg)("strong",{parentName:"p"},"Add Assignments"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select the users to assign the permissions, then choose ",(0,o.yg)("strong",{parentName:"p"},"Assign"),"."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image13.png")}),(0,o.yg)("ol",{start:7},(0,o.yg)("li",{parentName:"ol"},"Repeat these steps as needed for all users")),(0,o.yg)("h4",{id:"ac_administrator"},"AC_Administrator"),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image14.png")}),(0,o.yg)("h4",{id:"ac_manager"},"AC_Manager"),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image15.png")}),(0,o.yg)("h4",{id:"ac_agent"},"AC_Agent"),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image16.png")}),(0,o.yg)("h3",{id:"configure-the-lightning-experience"},"Configure the Lightning Experience"),(0,o.yg)("p",null,"In this guide, we will configure the CTI Adapter for Service Console\n(Lightning Experience). You may use the same procedure described in this\nsection for other applications."),(0,o.yg)("h4",{id:"configure-service-console"},"Configure Service Console"),(0,o.yg)("p",null,"First, you need to add the CTI softphone to your Service Console."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,o.yg)("strong",{parentName:"p"},"Setup"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the ",(0,o.yg)("strong",{parentName:"p"},"Quick Find")," box, type ",(0,o.yg)("strong",{parentName:"p"},"App Manager"),", then choose ",(0,o.yg)("strong",{parentName:"p"},"App\nManager")," from the result list."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image17.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"Expand the drop-down menu associated to Service Console and select\n",(0,o.yg)("strong",{parentName:"li"},"Edit"),".")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image18.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},"Once the ",(0,o.yg)("strong",{parentName:"li"},"Lightning App Builder")," opens, select ",(0,o.yg)("strong",{parentName:"li"},"Utility Items (Desktop Only)"),"\nfrom the left Navigation")),(0,o.yg)("img",{src:(0,i.A)("/img/shared/image10.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},"Choose ",(0,o.yg)("strong",{parentName:"li"},"Add Utility Item"),", then select ",(0,o.yg)("strong",{parentName:"li"},"Open CTI Softphone"),".")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image20.png")}),(0,o.yg)("ol",{start:6},(0,o.yg)("li",{parentName:"ol"},"Change the Label, if desired, then choose ",(0,o.yg)("strong",{parentName:"li"},"Save"),".")),(0,o.yg)("h4",{id:"allowlist-your-salesforce-org-with-amazon-connect"},"Allowlist Your Salesforce Org with Amazon Connect"),(0,o.yg)("p",null,"In order to embed the Amazon Connect Contact Control Panel (CCP) into\nyour Service Console, you need to allowlist two (2) domains for your org\nwith Amazon Connect. This allows for cross domain access to the\nunderlying resources required for the CCP to function."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,o.yg)("strong",{parentName:"p"},"Setup")," -> ",(0,o.yg)("strong",{parentName:"p"},"My Domain"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Copy the entire URL of this page and past it to a text document."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image21.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"In the ",(0,o.yg)("strong",{parentName:"li"},"Quick Find")," field, type ",(0,o.yg)("strong",{parentName:"li"},"visual"),", then select ",(0,o.yg)("strong",{parentName:"li"},"Visual\nForce Pages")," from the results")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image22.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},"Choose the ",(0,o.yg)("strong",{parentName:"li"},"AC_LightningAdapter")," Visualforce page")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image23.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},"On the Visualforce detail page, select the ",(0,o.yg)("strong",{parentName:"li"},"Preview")," button. This\nwill open a new browser tab showing the page content, which should\nonly be a button labelled Sign in to CCP. Copy the entire URL of\nthis page and past it to a text document.")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image24.png")}),(0,o.yg)("ol",{start:6},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In a new browser tab, login to the ",(0,o.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/"},(0,o.yg)("strong",{parentName:"a"},"AWS\nconsole")))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Navigate to the ",(0,o.yg)("a",{parentName:"p",href:"https://console.aws.amazon.com/connect/home"},"Amazon Connect\nConsole"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Validate that you are in the correct ",(0,o.yg)("strong",{parentName:"p"},"AWS region")," for your\ninstance, then select your instance alias from the list of\ninstances"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image25.png")}),(0,o.yg)("ol",{start:9},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Choose ",(0,o.yg)("strong",{parentName:"p"},"Approved Origins")," from the left navigation")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select + Add origin")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},'In the Enter origin URL field, enter the URL of the page that you\ncopied in step 2. The URL can vary depending on the instance due to a setting\nnamed "enhanced domain". You should copy and paste the domain name URL into the field. ')),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select Add. You should see your org domain listed in the Approved\norigins section."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image26.png")}),(0,o.yg)("ol",{start:13},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select + Add origin")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},'In the Enter origin URL field, enter the URL of the visualforce page\nthat you copied in step 5. Only enter the url through the .com. The URL can vary\ndepending on the instance due to a setting named "enhanced domain". You should copy\nand paste the visual force page domain URL into the field. ')),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select Add. You should see your org domain listed in the Approved\norigins section"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image27.png")}),(0,o.yg)("h4",{id:"modify-the-call-center"},"Modify the Call Center"),(0,o.yg)("p",null,"Now that you have allowlisted the org in the Amazon Connect Console, you\nwill need to modify the Call Center that was configured in Salesforce\nwhen the AppExchange package was installed. Once you complete the\nconfiguration, you add users to the Call Center to provide access to it."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,o.yg)("strong",{parentName:"p"},"Setup"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the ",(0,o.yg)("strong",{parentName:"p"},"Quick Find")," field, enter ",(0,o.yg)("strong",{parentName:"p"},"Call Center"),", then select\n",(0,o.yg)("strong",{parentName:"p"},"Call Centers")," from the result list"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image28.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If you see the ",(0,o.yg)("strong",{parentName:"p"},"Say Hello to Salesforce Call Center")," page, select\n",(0,o.yg)("strong",{parentName:"p"},"Continue"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select ",(0,o.yg)("strong",{parentName:"p"},"AC Lightning Adapter")))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image29.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"On the ",(0,o.yg)("strong",{parentName:"p"},"AC Lightning Adapter")," detail page, select ",(0,o.yg)("strong",{parentName:"p"},"Edit"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Replace the ",(0,o.yg)("strong",{parentName:"p"},"CTI Adapter URL")," with the AC Lightning Adapter visualforce page url you copied in the previous section.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Next, change the values for ",(0,o.yg)("strong",{parentName:"p"},"Softphone Height")," ",(0,o.yg)("strong",{parentName:"p"},"to 570")," and the\n",(0,o.yg)("strong",{parentName:"p"},"Softphone Width to 330"),", and choose ",(0,o.yg)("strong",{parentName:"p"},"Save."))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Once you return to the AC Lightning Adapter detail page, choose\n",(0,o.yg)("strong",{parentName:"p"},"Manage Call Center Users")," in the Call Center Users section")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"On the ",(0,o.yg)("strong",{parentName:"p"},"AC Lightning Adapter: Manage Users")," page, select ",(0,o.yg)("strong",{parentName:"p"},"Add\nMore Users"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Set filters (if desired) and then choose ",(0,o.yg)("strong",{parentName:"p"},"Find"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select the checkbox next to the user to add, then choose ",(0,o.yg)("strong",{parentName:"p"},"Add to\nCall Center"),"."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image30.png")}),(0,o.yg)("ol",{start:12},(0,o.yg)("li",{parentName:"ol"},"Repeat the steps to add more users.")),(0,o.yg)("h4",{id:"configure-the-toolkit-settings"},"Configure the Toolkit settings"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"Navigate to ",(0,o.yg)("strong",{parentName:"li"},"Setup")," then in type ",(0,o.yg)("strong",{parentName:"li"},"Custom Settings")," in Quick\nFind")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image31.png")}),(0,o.yg)("ol",{start:2},(0,o.yg)("li",{parentName:"ol"},"Next to the Toolkit for Amazon Connect custom setting, choose\n",(0,o.yg)("strong",{parentName:"li"},"Manage"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image32.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"Select ",(0,o.yg)("strong",{parentName:"li"},"New"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image33.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},"On the following page, provide the URL to your Amazon Connect\ninstance. This value can be found in your Amazon Connect console.")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/amazonconnectconsoleaccessurl.png")}),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image34.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},"You will also see the option to enable and disable certain\ntriggers in the package, which you can configure to meet your needs. You\ncan change these whenever you would like to. For more details, see below")),(0,o.yg)("h4",{id:"these-are-options-we-provide-that-allow-you-to-toggle-certain-functionality-in-the-adapter"},"These are options we provide that allow you to toggle certain functionality in the adapter."),(0,o.yg)("ul",null,(0,o.yg)("li",{parentName:"ul"},"CCA Case Trigger - This trigger looks for any ContactChannelAnalytics records that could be related to a updated/inserted Case, and creates a relationsihp between the two records. This trigger uses batching to process the update requests."),(0,o.yg)("li",{parentName:"ul"},"CCA Contact Trigger - This trigger looks for any ContactChannelAnalytics records that could be related to a updated/inserted Contact, and creates a relationsihp between the two records. This trigger uses batching to process the update requests."),(0,o.yg)("li",{parentName:"ul"},"Case Contact CCA Trigger - This trigger looks for any Case/Contact records that could be related to an updated/inserted ContactChannelAnalytics record, and creates a relationsihp between the records."),(0,o.yg)("li",{parentName:"ul"},"Task Trigger - This trigger creates a ContactChannel record for any inserted/updated task that with a ",(0,o.yg)("inlineCode",{parentName:"li"},"CallObject")," field that does not currently have a ContactChannel record created before.")),(0,o.yg)("ol",{start:6},(0,o.yg)("li",{parentName:"ol"},"Select ",(0,o.yg)("strong",{parentName:"li"},"Save"))),(0,o.yg)("h5",{id:"configure-the-scheduler-for-batch-processing-for-triggers"},"Configure the Scheduler for Batch processing for triggers"),(0,o.yg)("p",null,"The execution time for triggers that run in batches (refer the list above) can be managed using a cron-job scheduler in CTI Adapter. The scheduler allows you to configure the frequency at which triggers will execute in batches. By default, this job will run every hour. It's important to note that Salesforce's Lightning Platform has existing limits on lightning platforms, which you should consider when scheduling your apex batch jobs to avoid exceeding these constraints. For instance, there is a maximum limit of 100 concurrent Apex classes that can be scheduled (please refer to the ",(0,o.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.apexcode.meta/apexcode/apex_gov_limits.htm#in_topic_non_transactional_gov_limits_section"},"Salesforce documentation")," for the latest limits). Therefore, if you anticipate more than 100 batch Apex executions per hour to fulfill all the associations from the triggers, you may need to increase the batch execution frequency accordingly. In order to setup the processing of these jobs, follow the below steps: "),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"From the ",(0,o.yg)("em",{parentName:"p"},"Setup"),", go to ",(0,o.yg)("em",{parentName:"p"},"Object Manager"),", and click on ",(0,o.yg)("em",{parentName:"p"},"AC CTI Adapter"),". "),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/cti_adapter_object.png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"From the left navigation menu, select ",(0,o.yg)("em",{parentName:"p"},"Buttons, Links, and Actions")," and click on ",(0,o.yg)("em",{parentName:"p"},"New Action"),"."),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/create_new_action_one .png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the Action Type, select ",(0,o.yg)("em",{parentName:"p"},"Lightning Component"),". A drop down for lightning component will appear from which, select ",(0,o.yg)("inlineCode",{parentName:"p"},"amazonconnect:AC_ToggleScheduleBatchJob"),"."),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/create_new_action_two.png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Provide the Label to the action as ",(0,o.yg)("inlineCode",{parentName:"p"},"Schedule Batch Job")," and click on ",(0,o.yg)("em",{parentName:"p"},"Save"),".")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Click the ",(0,o.yg)("em",{parentName:"p"},"Page Layouts")," and select the current layout used for displaying CTI Adapter. The default layout provided currently is ",(0,o.yg)("em",{parentName:"p"},"AC CTI Adapter Layout - August 2020"),". ")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the page layout edit view, under ",(0,o.yg)("em",{parentName:"p"},"Salesforce Mobile and Lightning Experience Actions"),", enable the option to ",(0,o.yg)("em",{parentName:"p"},"override the predefined actions"),"."),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/override_lightning_action.png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"From the ",(0,o.yg)("em",{parentName:"p"},"Mobile and Lightning Actions"),", drag the newly created action to the lightning experience actions section, and save the layout."),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/drag_scheduler.png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the ",(0,o.yg)("em",{parentName:"p"},"Service Console"),", under the ",(0,o.yg)("em",{parentName:"p"},"AC CTI Adapters")," from the menu, choose the ",(0,o.yg)("inlineCode",{parentName:"p"},"ACLightningAdapter")," value been used in your Salesforce environment.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"From the drop down on the top right of the Cti Adapter, click on the newly created action ",(0,o.yg)("em",{parentName:"p"},"Schedule Batch Job"),"."),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/toggle_scheduler.png")})),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"A pop up will open that allows you to set the schedule for the batch jobs to run. If required, you can use any available cron generator (such as ",(0,o.yg)("a",{parentName:"p",href:"https://crontab.cronhub.io/"},"this"),") to create a cron job schedule.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Finally, click on ",(0,o.yg)("em",{parentName:"p"},"Start Scheduled Job For Batching")," to save the schedule and start the batch jobs."))),(0,o.yg)("h4",{id:"create-the-softphone-layout"},"Create the Softphone Layout"),(0,o.yg)("p",null,"Next, we need to create a softphone layout for the solution. The\nsoftphone layout settings will tell the console what resources are\navailable for screenpop by default and what to do under different match\nconditions."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,o.yg)("strong",{parentName:"p"},"Setup"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the ",(0,o.yg)("strong",{parentName:"p"},"Quick Find")," box, type ",(0,o.yg)("strong",{parentName:"p"},"Softphone"),", then choose\n",(0,o.yg)("strong",{parentName:"p"},"Softphone Layouts")," from the results")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If you are presented with the Get Started message, choose\n",(0,o.yg)("strong",{parentName:"p"},"Continue"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"On the Softphone Layouts page, choose ",(0,o.yg)("strong",{parentName:"p"},"New")))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image35.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},"Enter a name for the layout, such as ",(0,o.yg)("strong",{parentName:"li"},"AmazonConnectDefault"),", then\nselect the ",(0,o.yg)("strong",{parentName:"li"},"Is Default Layout")," checkbox.")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image36.png")}),(0,o.yg)("ol",{start:6},(0,o.yg)("li",{parentName:"ol"},"Expand ",(0,o.yg)("strong",{parentName:"li"},"Display these salesforce.com objects")," and select objects\nthat CTI Connector should be able to search, for a screen-pop query.\nIn this example, Case has been added to the default selection,\nallowing search and screen-pop by CaseID.")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image37.png")}),(0,o.yg)("ol",{start:7},(0,o.yg)("li",{parentName:"ol"},"If desired, configure the search behavior to your requirements")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image38.png")}),(0,o.yg)("ol",{start:8},(0,o.yg)("li",{parentName:"ol"},"Additionally, validate the Screen Pop settings. Please note that the\ndefault behavior is to not pop a screen if there is more than one\nresult")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image39.png")}),(0,o.yg)("ol",{start:9},(0,o.yg)("li",{parentName:"ol"},"Once you have configured the search behavior, choose ",(0,o.yg)("strong",{parentName:"li"},"Save"))),(0,o.yg)("h3",{id:"initial-cti-adapter-configuration"},"Initial CTI Adapter Configuration"),(0,o.yg)("p",null,"Once we have setup the Call Center, we need to do a final configuration\nof the CTI Adapter before we can test the basic configuration. This will\ntie the Lightning CTI adapter settings to the Call Center."),(0,o.yg)("h4",{id:"add-the-cti-adapter-console-app"},"Add the CTI Adapter Console App"),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to the ",(0,o.yg)("strong",{parentName:"p"},"Service Console"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Expand the ",(0,o.yg)("strong",{parentName:"p"},"navigation menu")," by selecting the down arrow and\nchoose ",(0,o.yg)("strong",{parentName:"p"},"Edit"),"."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image40.png")}),(0,o.yg)("ol",{start:3},(0,o.yg)("li",{parentName:"ol"},"On the Edit Service Console App Navigation Items page, select ",(0,o.yg)("strong",{parentName:"li"},"Add\nMore Items"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image41.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},"Select the ",(0,o.yg)("strong",{parentName:"li"},"+")," next to ",(0,o.yg)("strong",{parentName:"li"},"AC CTI Adapters")," and select the ",(0,o.yg)("strong",{parentName:"li"},"Add 1\nNav Item")," button")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image42.png")}),(0,o.yg)("ol",{start:5},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If desired, move the ",(0,o.yg)("strong",{parentName:"p"},"AC CTI Adapters")," button up in the navigation\nItems menu by dragging it up or down the list, then choose ",(0,o.yg)("strong",{parentName:"p"},"Save"),"\nto save changes")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select ",(0,o.yg)("strong",{parentName:"p"},"AC CTI Adapters")," from navigation menu")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If Recently Viewed is selected, select the drop-down and select\n",(0,o.yg)("strong",{parentName:"p"},"All")," from the List Views menu."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image43.png")}),(0,o.yg)("ol",{start:8},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"If no ACLightningAdapter entry exists, then select the new button to\nconfigure your AC CTI adapters, otherwise select the\n",(0,o.yg)("strong",{parentName:"p"},"ACLightningAdapter"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Fill out or confirm the Details as follows:")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"CTI Adapter Name: ",(0,o.yg)("strong",{parentName:"p"},"ACLightningAdapter"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Amazon Connect Instance: The url of your Amazon Connect\nInstance. You can find this in the Amazon Connect Console as shown\nbelow (if your Amazon Connect instance uses the ",(0,o.yg)("inlineCode",{parentName:"p"},"https://(instancename).awsapps.com/connect/login"),'\ndomain, then remove everything after ".com"):'))),(0,o.yg)("img",{src:(0,i.A)("/img/shared/image04.png")}),(0,o.yg)("ol",{start:12},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Amazon Connect Instance Region: This is the region that your Amazon\nConnect instance is deployed in. For this field, you will enter the\nregion code. For example, if you have deployed your Amazon Connect\ninstance in US East (N. Virginia), you would enter us-east-1. For a\nlist of region codes, please refer to the ",(0,o.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/general/latest/gr/rande.html"},"AWS Service\nEndpoints"),"\nreference")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Call Center Definition Name: ",(0,o.yg)("strong",{parentName:"p"},"ACLightningAdapter\nNote:")," This is the value of the Internal Name in the call center in\nthe Call Center definition")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Leave all other settings at the default for now, and choose Save"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image45.png")}),(0,o.yg)("ol",{start:15},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},(0,o.yg)("strong",{parentName:"p"},"Refresh")," the browser")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"In the bottom left corner of the Service Console, select the CTI\nSoftphone icon"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image46.png")}),(0,o.yg)("ol",{start:17},(0,o.yg)("li",{parentName:"ol"},"Select the ",(0,o.yg)("strong",{parentName:"li"},"Sign in to CCP")," button. A new window will pop up.\nEnter your Amazon Connect login credentials and select ",(0,o.yg)("strong",{parentName:"li"},"Sign In"),".\nMake sure to allow Microphone access (if asked by browser)\n",(0,o.yg)("strong",{parentName:"li"},"NOTE:")," At this point, this process will only work for Amazon\nConnect instances configured for local user storage. If you are\nconfiguring SAML, please follow the SAML setup process in the\n",(0,o.yg)("a",{parentName:"li",href:"/docs/lightning/cti-adapter/01-cti-adapter-configuration#single-sign-on-settings"},"Single Sign On Settings")," section before\ncontinuing.")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image47.png")}),(0,o.yg)("ol",{start:18},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Once Login is successful, the pop-up window will automatically\nclose.")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Expand the status menu and choose Available"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image48.png")}),(0,o.yg)("ol",{start:20},(0,o.yg)("li",{parentName:"ol"},"Make an inbound phone call to your Amazon Connect instance. The CCP\nwill alert you to the incoming call and allow you to accept it. Once\nyou do, the call will be connected")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image49.png")}),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image50.png")}),(0,o.yg)("ol",{start:21},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},(0,o.yg)("strong",{parentName:"p"},"End the call")," and clear the contact")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Set your agent back to ",(0,o.yg)("strong",{parentName:"p"},"Available")))),(0,o.yg)("h4",{id:"enhanced-agent-logout"},"Enhanced Agent Logout"),(0,o.yg)("p",null,'You can configure an agent status within "Manage agent status" with\n"Logout" (case-sensitive) in the status name to enable enhanced agent\nlogout. When the agent selects that logout status in the Contact Control\nPanel, it will first set the agent in an offline status. It will then\nlogout the agent in Connect and the AWS Console. Here is an example of\nthe agent status configured within Connect:'),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image51.png")}),(0,o.yg)("p",null,'Here is an example of an agent selecting the "Logout" status within the\nContact Control Panel:'),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image52.png")}),(0,o.yg)("p",null,"See how you can add custom agent statuses ",(0,o.yg)("a",{parentName:"p",href:"https://docs.aws.amazon.com/connect/latest/adminguide/agent-custom.html"},"here"),"."),(0,o.yg)("h4",{id:"validate-basic-screenpop"},"Validate Basic Screenpop"),(0,o.yg)("p",null,"Next, we will add a contact to Salesforce that has your phone number\nassigned to it. This will allow us to validate the basic screenpop\nfunctionality that is provided with the CTI adapter."),(0,o.yg)("ol",null,(0,o.yg)("li",{parentName:"ol"},"Select ",(0,o.yg)("strong",{parentName:"li"},"Contacts")," from the dropdown menu")),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image53.png")}),(0,o.yg)("ol",{start:2},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select ",(0,o.yg)("strong",{parentName:"p"},"New")," from top-right corner")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Complete the required fields. Make sure that your phone number is\nentered for the Phone field."))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image54.png")}),(0,o.yg)("ol",{start:4},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Select ",(0,o.yg)("strong",{parentName:"p"},"Save"))),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Close the Contact tab by selecting the X next to the name of the\ncontact that you just created"))),(0,o.yg)("img",{src:(0,i.A)("/img/lightning/image55.png")}),(0,o.yg)("ol",{start:6},(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},(0,o.yg)("strong",{parentName:"p"},"Refresh")," your browser")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"Place another phone ",(0,o.yg)("strong",{parentName:"p"},"call")," into your instance")),(0,o.yg)("li",{parentName:"ol"},(0,o.yg)("p",{parentName:"li"},"The new contact should automatically pop-up as it has been\nrecognized by incoming phone number."))))}h.isMDXComponent=!0}}]);