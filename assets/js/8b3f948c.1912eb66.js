"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[6362],{1669:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>c,toc:()=>g});var n=a(8168),r=(a(6540),a(5680)),o=a(6025);const l={id:"04-call-recording-playback",title:"Call Recording Playback"},i=void 0,c={unversionedId:"classic/cti-adapter/04-call-recording-playback",id:"classic/cti-adapter/04-call-recording-playback",title:"Call Recording Playback",description:"The Adapter comes with a Visualforce component that provides users with",source:"@site/docs/classic/03-cti-adapter/04-call-recording-playback.md",sourceDirName:"classic/03-cti-adapter",slug:"/classic/cti-adapter/04-call-recording-playback",permalink:"/amazon-connect-salesforce-cti/docs/classic/cti-adapter/04-call-recording-playback",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/classic/03-cti-adapter/04-call-recording-playback.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"04-call-recording-playback",title:"Call Recording Playback"},sidebar:"classic",previous:{title:"Contact Attributes Display",permalink:"/amazon-connect-salesforce-cti/docs/classic/cti-adapter/03-contact-attributes-display"},next:{title:"Call Display on the Account Page",permalink:"/amazon-connect-salesforce-cti/docs/classic/cti-adapter/05-call-display-account-page"}},s={},g=[{value:"Cloudformation Template",id:"cloudformation-template",level:3},{value:"Enabling call recording streaming",id:"enabling-call-recording-streaming",level:3},{value:"Adding users to the AC_CallRecording permission set",id:"adding-users-to-the-ac_callrecording-permission-set",level:3},{value:"Enable call recording streaming on the Contact Channel Analytics page",id:"enable-call-recording-streaming-on-the-contact-channel-analytics-page",level:3},{value:"Enable call recording streaming on the Task page",id:"enable-call-recording-streaming-on-the-task-page",level:3}],p={toc:g},m="wrapper";function d(e){let{components:t,...a}=e;return(0,r.yg)(m,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"The Adapter comes with a Visualforce component that provides users with\nthe ability to download a call recording created within Amazon Connect\nfrom a Salesforce page. You can play the call recordings on either the\nContact Channel Analytics page or the Task page."),(0,r.yg)("h3",{id:"cloudformation-template"},"Cloudformation Template"),(0,r.yg)("p",null,"To make sure that the AWS resources are set up, make sure that the\n",(0,r.yg)("em",{parentName:"p"},"PostcallRecordingImportEnabled")," parameter is set to true in your\nCloudformation stack:"),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image266.png")}),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"Note:")," If you are expecting more than 1000 concurrent calls, you may have to increase the timeout for the ",(0,r.yg)("inlineCode",{parentName:"p"},"sfCTRTrigger")," lambda.")),(0,r.yg)("h3",{id:"enabling-call-recording-streaming"},"Enabling call recording streaming"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Login to your Amazon Connect instance as an Administrator")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"From the left navigation, choose ",(0,r.yg)("strong",{parentName:"p"},"Routing")," then select ",(0,r.yg)("strong",{parentName:"p"},"Contact\nflows")))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image201.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Open the contact flow that you want to use to enable call recording\nimport. This contact flow must have Amazon Connect's native\nrecording turned on.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"In you contact flow, before you transfer to queue, add a new ",(0,r.yg)("strong",{parentName:"p"},"Set\ncontact attributes")," block")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Configure the block to set a contact attribute as follows:"),(0,r.yg)("p",{parentName:"li"},"a. ",(0,r.yg)("strong",{parentName:"p"},"Destination key:")," postcallRecordingImportEnabled"),(0,r.yg)("p",{parentName:"li"},"b. ",(0,r.yg)("strong",{parentName:"p"},"Value:")," true"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image202.png")}),(0,r.yg)("ol",{start:6},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Save")," the Set contact attributes block. Make sure it is\nappropriately connected to your contact flow, and ",(0,r.yg)("strong",{parentName:"p"},"Publish")," the\nflow.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Wait approximately 2 minutes to give the contact flow time to\npublish.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Place a call, connect to your agent, speak for a few moments to test\nthe audio, then end the call. Make sure the agent exits after call\nwork")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"After a minute or so, the recording should import."))),(0,r.yg)("h3",{id:"adding-users-to-the-ac_callrecording-permission-set"},"Adding users to the AC_CallRecording permission set"),(0,r.yg)("p",null,"This step is only necessary for non admin user accounts."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},'In the setup search box, search for "Permission sets". Select the "AC_CallRecording" permission set. Select "Manage Assignments".')),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image278.png")}),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},'Select "Add Assignments". Add the users that should have access to the audio recordings and select "assign".')),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image279.png")}),(0,r.yg)("h3",{id:"enable-call-recording-streaming-on-the-contact-channel-analytics-page"},"Enable call recording streaming on the Contact Channel Analytics page"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},"Navigate to the Sales Console, and select the ",(0,r.yg)("strong",{parentName:"li"},"+")," button on the top bar.")),(0,r.yg)("img",{src:(0,o.A)("/img/classic/ccacallrecording0.png")}),(0,r.yg)("ol",{start:2},(0,r.yg)("li",{parentName:"ol"},"Select ",(0,r.yg)("strong",{parentName:"li"},"AC Contact Channel Analytics"),".")),(0,r.yg)("img",{src:(0,o.A)("/img/classic/ccacallrecording1.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},"Select into a record and then select ",(0,r.yg)("strong",{parentName:"li"},"Edit Layout"),".")),(0,r.yg)("img",{src:(0,o.A)("/img/classic/ccacallrecording2.png")}),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},"Select ",(0,r.yg)("strong",{parentName:"li"},"Visualforce Pages")," and then drag ",(0,r.yg)("strong",{parentName:"li"},"AC_RecordingViewer")," into your desired location.")),(0,r.yg)("img",{src:(0,o.A)("/img/classic/ccacallrecording3.png")}),(0,r.yg)("ol",{start:5},(0,r.yg)("li",{parentName:"ol"},"Select ",(0,r.yg)("strong",{parentName:"li"},"Save"),", and observe that the audio recording component in the Contact Channel Analytics page.")),(0,r.yg)("img",{src:(0,o.A)("/img/classic/ccacallrecording4.png")}),(0,r.yg)("h3",{id:"enable-call-recording-streaming-on-the-task-page"},"Enable call recording streaming on the Task page"),(0,r.yg)("p",null,"The below steps will add an audio recording component to tasks created from ",(0,r.yg)("a",{parentName:"p",href:"/docs/classic/appendices/appendix-c-cti-flow-examples/01-cti-flow-examples#create-a-task-call-activity-and-pop-that-task"},"this CTI flow")," (or any tasks with the CallObject field set to the contactId of the call)."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Click into a task in your Salesforce org")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},'Click "Edit Layout"'))),(0,r.yg)("img",{src:(0,o.A)("/img/classic/taskcallrecording1.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},'Drag the "ACSFCCP_CallRecordingTask" item to the desired are of the layout to have that information appear on the agent\'s screen.')),(0,r.yg)("img",{src:(0,o.A)("/img/classic/taskcallrecording2.png")}),(0,r.yg)("img",{src:(0,o.A)("/img/classic/taskcallrecording3.png")}),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},"To have access to the recording, the user must have an active session with Amazon Connect. This can be achieved by either logging in to the CCP softphone, or by logging in to Amazon Connect outside of Salesforce. After the session is established, a page refresh should make the player appear.")))}d.isMDXComponent=!0},5680:(e,t,a)=>{a.d(t,{xA:()=>g,yg:()=>y});var n=a(6540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var c=n.createContext({}),s=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},g=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,g=i(e,["components","mdxType","originalType","parentName"]),p=s(a),d=r,y=p["".concat(c,".").concat(d)]||p[d]||m[d]||o;return a?n.createElement(y,l(l({ref:t},g),{},{components:a})):n.createElement(y,l({ref:t},g))}));function y(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[p]="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=a[s];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);