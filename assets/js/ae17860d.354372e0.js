"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[2507],{1183:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>g,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>p});var t=n(8168),r=(n(6540),n(5680)),s=n(6025);const o={id:"01-contact-flow-salesforce-lambdas",title:"Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda"},l=void 0,i={unversionedId:"lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas",id:"lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas",title:"Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda",description:"The most commonly used feature of the AWS Serverless Application",source:"@site/docs/lightning/04-salesforce-lambdas/01-contact-flow-salesforce-lambdas.md",sourceDirName:"lightning/04-salesforce-lambdas",slug:"/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/04-salesforce-lambdas/01-contact-flow-salesforce-lambdas.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{id:"01-contact-flow-salesforce-lambdas",title:"Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda"},sidebar:"lightning",previous:{title:"Global Resiliency",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/16-global-resiliency"},next:{title:"Amazon Connect Historical Metrics in Salesforce",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics"}},g={},p=[{value:"Salesforce Lookup",id:"salesforce-lookup",level:3},{value:"Salesforce Create",id:"salesforce-create",level:3},{value:"Salesforce Update",id:"salesforce-update",level:3},{value:"Salesforce Phone Lookup",id:"salesforce-phone-lookup",level:3},{value:"Salesforce Delete",id:"salesforce-delete",level:3},{value:"Salesforce query",id:"salesforce-query",level:3},{value:"Salesforce queryOne",id:"salesforce-queryone",level:3},{value:"Salesforce createChatterPost",id:"salesforce-createchatterpost",level:3},{value:"Salesforce createChatterComment",id:"salesforce-createchattercomment",level:3},{value:"Salesforce search",id:"salesforce-search",level:3},{value:"Salesforce searchOne",id:"salesforce-searchone",level:3}],c={toc:p},m="wrapper";function u(e){let{components:a,...n}=e;return(0,r.yg)(m,(0,t.A)({},c,n,{components:a,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"The most commonly used feature of the AWS Serverless Application\nRepository for Salesforce is accessing/updating Salesforce data using\nthe sfInvokeAPI Lambda function. This function allows an Amazon Connect\ncontact flow to perform the following operations against your Salesforce\norg:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Lookup:")," queries Salesforce for objects based on the parameters\npassed to it")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Create:")," creates a Salesforce object based on the parameters\npassed to it")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Update:")," updates a Salesforce object based on the parameters\npassed to it")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Phone Lookup:")," uses Salesforce Object Search Language (SOSL) to\nconstruct text-based search queries against the search index, which\ngives significant performance improvement when searching phone\nnumber fields.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Delete:")," deletes a Salesforce object based on the parameters\npassed to it")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Query:")," executes a Salesforce Object Query Language (SOQL) query\non the Salesforce instance. Can return multiple entries.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"QueryOne:")," executes a Salesforce Object Query Language (SOQL)\nquery on the Salesforce instance. Returns result only when one entry\nis returned from the query.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"CreateChatterPost:")," creates a chatter post.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"CreateChatterComment:")," creates a chatter comment.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Search:")," performs a search against the Salesforce instance, returning all results.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"SearchOne:")," performs a search against the Salesforce instance, returning at most one result."))),(0,r.yg)("p",null,(0,r.yg)("strong",{parentName:"p"},"NOTE:")," naming of the Lambda function will vary based on template\ndata, but sfInvokeAPI will always be a part of the name."),(0,r.yg)("p",null,"When you invoke this Lambda function from your contact flows, you will\nneed to pass along parameters that inform the function as to which\nSalesforce operation you wish to execute, as well as pass along any\nrequired parameters. Depedning on your use case, this can require\nreference to the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_list.htm"},"Salesforce REST\nAPI"),"\nor the ",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/intro_what_is_chatter_connect.htm"},"Salesforce Connect REST\nAPI"),"\ndocumentation. The core parameters are:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sf_operation:")," specifies with operation to run. Options are\nlookup, create, update, phoneLookup, query, queryOne,\ncreateChatterPost, createChatterComment")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sf_object:")," defines what type of object you are referencing.\nExamples include Case, Contact, Task, etc.")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sf_fields:")," the fields you want to receive back from Salesforce\nwhen an operation completes successfully")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sf_id:")," the unique identifier for a Salesforce object. Typically\nused in update operations")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"sf_phone:")," contains the phone number used to search when\nperforming a phone lookup"))),(0,r.yg)("h3",{id:"salesforce-lookup"},"Salesforce Lookup"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"lookup"),". In\nthis case, the Lambda function queries Salesforce for objects based on\nthe parameters passed to it. For lookup, the following parameters are\nrequired:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_fields"))),(0,r.yg)("p",null,"Any additional parameters passed will be evaluated as conditional\narguments for the lookup."),(0,r.yg)("p",null,"Note that this operation only returns the first item of the query\nresults. If you want to have all results returned from Salesforce, set\n",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"lookup_all"),"."),(0,r.yg)("p",null,"In the contact flow example below, we are looking for a specific case\nbased on customer input."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image156.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "5006g00000AaIs7AAF",\n    "sf_count": 1\n}\n')),(0,r.yg)("p",null,"For ",(0,r.yg)("strong",{parentName:"p"},"lookup_all")," the operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "sf_records_0_Id": "5006g00000AaIs7AAF",\n    "sf_records_1_Id": "5006g00000AaIs7AAE",\n    "sf_count": 2\n}\n')),(0,r.yg)("p",null,"Note that ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_count")," is the count of records matched and not the count of fields in the response. This means all fields that start with ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_records_i_")," count as one record. If the query above returned the Name as well as the Id the response will be:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "sf_records_0_Id": "5006g00000AaIs7AAF",\n    "sf_records_0_Name": "Name0",\n    "sf_records_1_Id": "5006g00000AaIs7AAE",\n    "sf_records_1_Name": "Name1",\n    "sf_count": 2\n}\n')),(0,r.yg)("h3",{id:"salesforce-create"},"Salesforce Create"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"create"),". In\nthis case, the Lambda function creates a Salesforce object based on the\nparameters passed to it. For create, the following parameters are\nrequired:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Specify additional parameters for the Salesforce object to be\ncreated. Please be sure to include all parameters required to create\nthe Salesforce object."))),(0,r.yg)("p",null,"In the contact flow example below, we creating a new case based on\ncustomer input."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image157.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "5006g00000BLqurAAD"\n}\n')),(0,r.yg)("h3",{id:"salesforce-update"},"Salesforce Update"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"update"),". In\nthis case, the Lambda function updates a Salesforce object based on the\nparameters passed to it. For update, the following parameters are\nrequired:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_id")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"Specify additional parameters for the Salesforce object to be\ncreated. Please be sure to include all parameters required to create\nthe Salesforce object."))),(0,r.yg)("p",null,"In the contact flow example below, we are updating a specific case."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image158.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Status": "204"\n}\n')),(0,r.yg)("p",null,'The "204" status indicates a success.'),(0,r.yg)("h3",{id:"salesforce-phone-lookup"},"Salesforce Phone Lookup"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to\n",(0,r.yg)("strong",{parentName:"p"},"phoneLookup"),". In this case, the Lambda function uses Salesforce\nObject Search Language (SOSL) to construct text-based search queries.\nFor phoneLookup, the following parameters are required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_phone")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_fields"))),(0,r.yg)("p",null,"In the contact flow example below, we look for a customer by phone\nnumber."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image159.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "5006g00000BLqurAAD",\n    "sf_count": "1",\n    "Name": "Jim Smith"\n}\n')),(0,r.yg)("h3",{id:"salesforce-delete"},"Salesforce Delete"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"delete"),". In\nthis case, the Lambda function deletes a Salesforce object based on the\nparameters passed to it. For delete, the following parameters are\nrequired:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_id"))),(0,r.yg)("p",null,"In the contact flow example below, we deleting an existing case based on\ncustomer input."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image160.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image161.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Response": "None"\n}\n')),(0,r.yg)("h3",{id:"salesforce-query"},"Salesforce query"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"query"),". In\nthis case, the Lambda function uses Salesforce Object Query Language\n(SOQL) to conduct a query against the Salesforce instance. For query,\nthe following parameter is required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"query")),(0,r.yg)("p",null,"Any additional parameters will replace text values in the original query\nso that queries can be dynamic based on values stored within the contact\nflow. For example, the parameter set:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'query: "select field from object"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'field: "Id"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'object: "Task"'))),(0,r.yg)("p",null,'Will result in the query: "select Id from Task".'),(0,r.yg)("p",null,"In the contact flow example below, we look for a customer by phone\nnumber."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image162.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image163.png")}),(0,r.yg)("p",null,"(full text of the value is \"select Id from Contact where Phone LIKE\n'%number%'\")"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image164.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "sf_records_0_Id": "00303000001RZfIAAW",\n    "sf_count": 1\n}\n')),(0,r.yg)("p",null,"Note that ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_count")," is the count of records matched and not the count of fields in the response. This means all fields that start with ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_records_i_")," count as one record. If the query above returned the Name as well as the Id and matched more than one record, the response will be:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "sf_records_0_Id": "00303000001RZfIAAW",\n    "sf_records_0_Name": "Name0",\n    "sf_records_1_Id": "00303000001RZfIAAE",\n    "sf_records_1_Name": "Name1",\n    "sf_count": 2\n}\n')),(0,r.yg)("h3",{id:"salesforce-queryone"},"Salesforce queryOne"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to ",(0,r.yg)("strong",{parentName:"p"},"queryOne"),"\n(case sensitive). In this case, the Lambda function uses Salesforce\nObject Query Language (SOQL) to conduct a query against the Salesforce\ninstance, returning a result only when one record is returned from the\nquery. For query, the following parameter is required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"query")),(0,r.yg)("p",null,"Any additional parameters will replace text values in the original query\nso that queries can be dynamic based on values stored within the contact\nflow. For example, the parameter set:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'query: "select field from object"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'field: "Id"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'object: "Task"'))),(0,r.yg)("p",null,'Will result in the query: "select Id from Task".'),(0,r.yg)("p",null,"In the contact flow example below, we look for a customer by phone\nnumber."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image165.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image163.png")}),(0,r.yg)("p",null,"(full text of the value is \"select Id from Contact where Phone LIKE\n'%number%'\")"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image164.png")}),(0,r.yg)("p",null,"This operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "00303000001RZfIAAW",\n    "sf_count": 1\n}\n')),(0,r.yg)("h3",{id:"salesforce-createchatterpost"},"Salesforce createChatterPost"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to\n",(0,r.yg)("strong",{parentName:"p"},"createChatterPost")," (case sensitive). In this case, the Lambda\nfunction uses the Salesforce Connect REST API to create a chatter post\n(see\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/quickreference_post_feed_item.htm"},"here"),").\nFor createChatterPost, the following parameters are required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_feedElementType")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_subjectId")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_messageType")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_message"))),(0,r.yg)("p",null,"The following parameter is optional:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"sf_mention")),(0,r.yg)("p",null,"(refer to the api reference for value types)"),(0,r.yg)("p",null,"Any additional parameters will replace text values in the sf_message so\nthat messages can be dynamic based on values stored within the contact\nflow. For example, the parameter set:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'sf_message: "Please help me with case ',(0,r.yg)("inlineCode",{parentName:"p"},"caseId"),'"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"caseId: 1234"))),(0,r.yg)("p",null,'Will result in the message: "Please help me with case 1234".'),(0,r.yg)("p",null,"In the contact flow example below, we leave a chatter post on a contact."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image166.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image167.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image168.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image169.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image170.png")}),(0,r.yg)("p",null,'(full text of the value is "I had a problem during the call. My contact\nid is ',(0,r.yg)("inlineCode",{parentName:"p"},"contactId"),'.")'),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image171.png")}),(0,r.yg)("p",null,"The operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "0D503000000ILY5CAO"\n}\n')),(0,r.yg)("p",null,"See the chatter post appear attached to the Subject:"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image172.png")}),(0,r.yg)("h3",{id:"salesforce-createchattercomment"},"Salesforce createChatterComment"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to\n",(0,r.yg)("strong",{parentName:"p"},"createChatterComment")," (case sensitive). In this case, the Lambda\nfunction uses the Salesforce Connect REST to create a chatter comment\n(see\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_feed_element_capability_comments_items.htm"},"here"),").\nFor createChatterComment, the following parameters are required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_feedElementId")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_commentType")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_commentMessage"))),(0,r.yg)("p",null,"(refer to the api reference for value types)"),(0,r.yg)("p",null,"Any additional parameters will replace text values in the\nsf_commentMessage so that messages can be dynamic based on values stored\nwithin the contact flow. For example, the parameter set:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},'sf_commentMessage: "Please help me with case ',(0,r.yg)("inlineCode",{parentName:"p"},"caseId"),'"')),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"caseId: 1234"))),(0,r.yg)("p",null,"In the contact flow example below, we leave a comment on a chatter post."),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image173.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image174.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image175.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image176.png")}),(0,r.yg)("p",null,"The operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "0D703000000ChhNCAS"\n}\n')),(0,r.yg)("p",null,"See the chatter post appear attached to the Subject:"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image177.png")}),(0,r.yg)("h3",{id:"salesforce-search"},"Salesforce search"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to\n",(0,r.yg)("strong",{parentName:"p"},"search")," (case sensitive). In this case, the Lambda\nfunction uses the Salesforce REST to perform a parameterized search\n(see\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_search_parameterized.htm"},"here"),").\nFor search, the following parameters are required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"q")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_fields")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object"))),(0,r.yg)("p",null,"The following parameters are optional:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"where")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"overallLimit"))),(0,r.yg)("p",null,"(refer to the api reference for value types)"),(0,r.yg)("p",null,"See the below example:"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image258.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image259.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image260.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image261.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image262.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image263.png")}),(0,r.yg)("p",null,"The operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "sf_records_0_Id": "50001000001B9e6AAG",\n    "sf_records_0_Subject": "test subject",\n    "sf_records_0_Status": "New",\n    "sf_records_1_Id": "50001000001B9eWAAS",\n    "sf_records_1_Subject": "test subject",\n    "sf_records_1_Status": "New",\n    "sf_records_2_Id": "50001000001BDgiAAG",\n    "sf_records_2_Subject": "test subject",\n    "sf_records_2_Status": "New",\n    "sf_count": 3\n}\n')),(0,r.yg)("p",null,"Note that ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_count")," is the count of records matched and not the count of fields in the response. This means all fields that start with ",(0,r.yg)("inlineCode",{parentName:"p"},"sf_records_i_")," count as one record."),(0,r.yg)("h3",{id:"salesforce-searchone"},"Salesforce searchOne"),(0,r.yg)("p",null,"This operation is invoked by setting ",(0,r.yg)("strong",{parentName:"p"},"sf_operation")," to\n",(0,r.yg)("strong",{parentName:"p"},"searchOne")," (case sensitive). In this case, the Lambda\nfunction uses the Salesforce REST to perform a parameterized search\n(see\n",(0,r.yg)("a",{parentName:"p",href:"https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_search_parameterized.htm"},"here"),").\nFor search, the following parameters are required:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"q")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_fields")),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("p",{parentName:"li"},"sf_object"))),(0,r.yg)("p",null,"The following parameter is optional:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"where")),(0,r.yg)("p",null,"(refer to the api reference for value types)"),(0,r.yg)("p",null,"See the below example:"),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image264.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image265.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image260.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image261.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image262.png")}),(0,r.yg)("img",{src:(0,s.A)("/img/lightning/image263.png")}),(0,r.yg)("p",null,"The operation returns a response of:"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-json"},'{\n    "Id": "50001000001BIn6AAG",\n    "Subject": "test subject unique", \n    "Status": "New", \n    "sf_count": 1\n}\n')))}u.isMDXComponent=!0},5680:(e,a,n)=>{n.d(a,{xA:()=>p,yg:()=>y});var t=n(6540);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function s(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function o(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?s(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function l(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},s=Object.keys(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)n=s[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=t.createContext({}),g=function(e){var a=t.useContext(i),n=a;return e&&(n="function"==typeof e?e(a):o(o({},a),e)),n},p=function(e){var a=g(e.components);return t.createElement(i.Provider,{value:a},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},u=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,s=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),c=g(n),u=r,y=c["".concat(i,".").concat(u)]||c[u]||m[u]||s;return n?t.createElement(y,o(o({ref:a},p),{},{components:n})):t.createElement(y,o({ref:a},p))}));function y(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var s=n.length,o=new Array(s);o[0]=u;var l={};for(var i in a)hasOwnProperty.call(a,i)&&(l[i]=a[i]);l.originalType=e,l[c]="string"==typeof e?e:r,o[1]=l;for(var g=2;g<s;g++)o[g]=n[g];return t.createElement.apply(null,o)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);