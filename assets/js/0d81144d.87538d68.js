"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[8081],{4131:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>g,contentTitle:()=>c,default:()=>y,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var n=a(8168),r=(a(6540),a(5680)),o=a(6025);const i={id:"05-contact-trace-record-import",title:"Contact Trace Record Import"},c=void 0,l={unversionedId:"lightning/salesforce-lambdas/05-contact-trace-record-import",id:"lightning/salesforce-lambdas/05-contact-trace-record-import",title:"Contact Trace Record Import",description:"In Amazon Connect, data about contacts is captured in contact trace",source:"@site/docs/lightning/04-salesforce-lambdas/05-contact-trace-record-import.md",sourceDirName:"lightning/04-salesforce-lambdas",slug:"/lightning/salesforce-lambdas/05-contact-trace-record-import",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/04-salesforce-lambdas/05-contact-trace-record-import.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{id:"05-contact-trace-record-import",title:"Contact Trace Record Import"},sidebar:"lightning",previous:{title:"Contact Channel Analytics",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics"},next:{title:"Postcall Contact Lens Import",permalink:"/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import"}},g={},s=[{value:"Contact Trace Record Import",id:"contact-trace-record-import",level:3},{value:"Enabling Contact Trace Record Import",id:"enabling-contact-trace-record-import",level:4},{value:"Adding Contact Trace Records to the Service Console",id:"adding-contact-trace-records-to-the-service-console",level:4},{value:"Display Additional Contact Trace Record Data",id:"display-additional-contact-trace-record-data",level:3},{value:"Customizing the AC Contact Trace Record Layout",id:"customizing-the-ac-contact-trace-record-layout",level:4}],p={toc:s},m="wrapper";function y(e){let{components:t,...a}=e;return(0,r.yg)(m,(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("p",null,"In Amazon Connect, data about contacts is captured in contact trace\nrecords (CTR). This data can include the amount of time a contact spends\nin each state: customer on hold, customer in queue, agent interaction\ntime. The basis for most historical and real-time metrics in Amazon\nConnect is the data in the CTR. When you create metrics reports, the\nvalues displayed for ",(0,r.yg)("strong",{parentName:"p"},"most")," (not all) metrics in the report are\ncalculated using the data in the CTRs."),(0,r.yg)("p",null,"CTRs are available within your Amazon Connect instance for 24 months\nfrom the time when the associated contact was initiated. You can also\nstream CTRs to Amazon Kinesis to retain the data longer, and perform\nadvanced analysis on it. Additionally, with the AWS Serverless\nApplication Repository for Salesforce, you can import Contact Trace\nRecords into your Salesforce org."),(0,r.yg)("h3",{id:"contact-trace-record-import"},"Contact Trace Record Import"),(0,r.yg)("p",null,"Once enabled during the AWS Serverless Application Repository for\nSalesforce, CTR import is activated on a call by call basis by adding a\nspecific contact attribute. This attribute is used during Contact Trace\nRecord processing to trigger the import task."),(0,r.yg)("h4",{id:"enabling-contact-trace-record-import"},"Enabling Contact Trace Record Import"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Login to your Amazon Connect instance as an Administrator")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"From the left navigation, choose ",(0,r.yg)("strong",{parentName:"p"},"Routing")," then select ",(0,r.yg)("strong",{parentName:"p"},"Contact\nflows")))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image201.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Open the contact flow that you want to use to enable call recording\nimport.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"In you contact flow, before you transfer to queue, add a new ",(0,r.yg)("strong",{parentName:"p"},"Set\ncontact attributes")," block")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Configure the block to set a contact attribute as follows:"),(0,r.yg)("p",{parentName:"li"},"a.  ",(0,r.yg)("strong",{parentName:"p"},"Destination key:")," postcallCTRImportEnabled"),(0,r.yg)("p",{parentName:"li"},"b.  ",(0,r.yg)("strong",{parentName:"p"},"Value:")," true"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image214.png")}),(0,r.yg)("ol",{start:6},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Save")," the Set contact attributes block. Make sure it is\nappropriately connected to your contact flow, and ",(0,r.yg)("strong",{parentName:"p"},"Publish")," the\nflow.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Wait approximately 2 minutes to give the contact flow time to\npublish.")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Place a call, connect to your agent, speak for a few moments, then\nend the call. Make sure the agent exits after call work")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"The Contact Trace Record is emitted shortly after call completion\nand the import happens almost immediately."))),(0,r.yg)("blockquote",null,(0,r.yg)("p",{parentName:"blockquote"},(0,r.yg)("strong",{parentName:"p"},"Note:")," If you are expecting more than 1000 concurrent calls, you may have to increase the timeout for the ",(0,r.yg)("inlineCode",{parentName:"p"},"sfCTRTrigger")," lambda.")),(0,r.yg)("h4",{id:"adding-contact-trace-records-to-the-service-console"},"Adding Contact Trace Records to the Service Console"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to the ",(0,r.yg)("strong",{parentName:"p"},"Service Console"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Expand the ",(0,r.yg)("strong",{parentName:"p"},"navigation menu")," by selecting the down arrow and\nchoose ",(0,r.yg)("strong",{parentName:"p"},"Edit"),"."))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image40.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},"On the Edit Service Console App Navigation Items page, select ",(0,r.yg)("strong",{parentName:"li"},"Add\nMore Items"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image41.png")}),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select the ",(0,r.yg)("strong",{parentName:"p"},"+")," next to ",(0,r.yg)("strong",{parentName:"p"},"AC Contact Trace Records"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select ",(0,r.yg)("strong",{parentName:"p"},"Add 1 Nav Item"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Change the order of your Navigation Items if desired, then choose\n",(0,r.yg)("strong",{parentName:"p"},"Save")))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image215.png")}),(0,r.yg)("ol",{start:7},(0,r.yg)("li",{parentName:"ol"},"Once the save completes, expand the ",(0,r.yg)("strong",{parentName:"li"},"navigation menu")," by selecting\nthe down arrow and choose ",(0,r.yg)("strong",{parentName:"li"},"AC Contact Trace Records"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image216.png")}),(0,r.yg)("ol",{start:8},(0,r.yg)("li",{parentName:"ol"},"Change the list view from Recently Viewed to ",(0,r.yg)("strong",{parentName:"li"},"All"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image217.png")}),(0,r.yg)("ol",{start:9},(0,r.yg)("li",{parentName:"ol"},"Once the view refreshes, you should see your record(s)")),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image218.png")}),(0,r.yg)("ol",{start:10},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select a record to view it")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Note the ContactId value from Amazon Connect"))),(0,r.yg)("h3",{id:"display-additional-contact-trace-record-data"},"Display Additional Contact Trace Record Data"),(0,r.yg)("p",null,"By default, the AC Contact Trace Record layout only contains the\nContactId. However, all of the CTR data has been imported. It is likely\nthat you will want to customize this view to show more data."),(0,r.yg)("h4",{id:"customizing-the-ac-contact-trace-record-layout"},"Customizing the AC Contact Trace Record Layout"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Log in into your Salesforce org and go to ",(0,r.yg)("strong",{parentName:"p"},"Setup"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"In the ",(0,r.yg)("strong",{parentName:"p"},"Quick Find")," field, enter object and choose ",(0,r.yg)("strong",{parentName:"p"},"Object\nManager")," from the results"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image219.png")}),(0,r.yg)("ol",{start:3},(0,r.yg)("li",{parentName:"ol"},"In the Object Manager, find the ",(0,r.yg)("strong",{parentName:"li"},"AC Contact Trace Record")," object\nand select it")),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image220.png")}),(0,r.yg)("ol",{start:4},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"In the left navigation, choose ",(0,r.yg)("strong",{parentName:"p"},"Page Layouts"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select ",(0,r.yg)("strong",{parentName:"p"},"AC Contract Trace Record Layout"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select items from the Fields section and add them to the layout as\nyou wish. In the example below, I have selected Agent Username,\nQueue Name, Queue Duration, After Contact Work Duration, Agent\nInteraction Duration, and Attributes"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image221.png")}),(0,r.yg)("ol",{start:7},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Save")," the layout")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Return to the ",(0,r.yg)("strong",{parentName:"p"},"Service Console"))),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},(0,r.yg)("strong",{parentName:"p"},"Refresh")," the browser")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Expand the ",(0,r.yg)("strong",{parentName:"p"},"navigation menu")," by selecting the down arrow and\nchoose ",(0,r.yg)("strong",{parentName:"p"},"AC Contact Trace Records")))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image216.png")}),(0,r.yg)("ol",{start:11},(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"Select a contact trace record")),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("p",{parentName:"li"},"You should now see your modified layout"))),(0,r.yg)("img",{src:(0,o.A)("/img/lightning/image222.png")}))}y.isMDXComponent=!0},5680:(e,t,a)=>{a.d(t,{xA:()=>s,yg:()=>d});var n=a(6540);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),g=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},s=function(e){var t=g(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},y=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),p=g(a),y=r,d=p["".concat(l,".").concat(y)]||p[y]||m[y]||o;return a?n.createElement(d,i(i({ref:t},s),{},{components:a})):n.createElement(d,i({ref:t},s))}));function d(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=y;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[p]="string"==typeof e?e:r,i[1]=c;for(var g=2;g<o;g++)i[g]=a[g];return n.createElement.apply(null,i)}return n.createElement.apply(null,a)}y.displayName="MDXCreateElement"}}]);