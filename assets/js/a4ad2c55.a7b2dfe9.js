"use strict";(self.webpackChunkamazon_connect_salesforce_cti=self.webpackChunkamazon_connect_salesforce_cti||[]).push([[4855],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>u});var n=a(7294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function r(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=n.createContext({}),s=function(e){var t=n.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):r(r({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},h=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,c=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),h=s(a),u=o,m=h["".concat(c,".").concat(u)]||h[u]||p[u]||i;return a?n.createElement(m,r(r({ref:t},d),{},{components:a})):n.createElement(m,r({ref:t},d))}));function u(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,r=new Array(i);r[0]=h;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:o,r[1]=l;for(var s=2;s<i;s++)r[s]=a[s];return n.createElement.apply(null,r)}return n.createElement.apply(null,a)}h.displayName="MDXCreateElement"},3736:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>d});var n=a(7462),o=(a(7294),a(3905)),i=a(4996);const r={id:"08-cti-actions",title:"CTI Actions"},l=void 0,c={unversionedId:"lightning/cti-adapter/08-cti-actions",id:"lightning/cti-adapter/08-cti-actions",title:"CTI Actions",description:"Customers can now extend their Contact Control Panel (CCP) with customizable buttons called CTI Actions. These buttons can be configured in Salesforce and used to simplify common agent actions. For example, you can add a button that starts and stops recordings, automate case creation, or start a customer refund process. CTI Actions are configured in the CTI Adapter\u2019s Actions Admin panel to execute CTI Flows which are process blocks that enable you to easily design agent workflows within our Salesforce integration.",source:"@site/docs/lightning/03-cti-adapter/08-cti-actions.md",sourceDirName:"lightning/03-cti-adapter",slug:"/lightning/cti-adapter/08-cti-actions",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions",draft:!1,editUrl:"https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/03-cti-adapter/08-cti-actions.md",tags:[],version:"current",sidebarPosition:8,frontMatter:{id:"08-cti-actions",title:"CTI Actions"},sidebar:"lightning",previous:{title:"Contact Lens",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens"},next:{title:"Recording Controls",permalink:"/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls"}},s={},d=[{value:"CCP Overlay",id:"ccp-overlay",level:3},{value:"Example",id:"example",level:3},{value:"Receiving Data from CTI Flows",id:"receiving-data-from-cti-flows",level:3},{value:"Upgrading from an earlier version",id:"upgrading-from-an-earlier-version",level:2}],p={toc:d};function h(e){let{components:t,...a}=e;return(0,o.kt)("wrapper",(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Customers can now extend their Contact Control Panel (CCP) with customizable buttons called CTI Actions. These buttons can be configured in Salesforce and used to simplify common agent actions. For example, you can add a button that starts and stops recordings, automate case creation, or start a customer refund process. CTI Actions are configured in the CTI Adapter\u2019s Actions Admin panel to execute ",(0,o.kt)("a",{parentName:"p",href:"https://aws.amazon.com/blogs/contact-center/automate-agent-workflows-with-salesforce-cti-adapter/"},"CTI Flows")," which are process blocks that enable you to easily design agent workflows within our Salesforce integration."),(0,o.kt)("p",null,"You can configure a CTI Action in the CCP Element Editor page."),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-element-editor-02.png")}),(0,o.kt)("p",null,'Make sure that you have created a CTI Flow and it uses the source "CTI Action." Only these CTI Flows will be displayed in the dropdown field.'),(0,o.kt)("p",null,"You can optionally specify a payload to pass to the CTI Flow. This allows your agents to enter additional data about the customer or information about the call to pass into the CTI Flow. The CCP Element Editor gives you the ability to add input fields into your form. These fields can be accessed in the CTI Flow through ",(0,o.kt)("inlineCode",{parentName:"p"},"$.payload.fieldKey"),"."),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-element-editor-03.png")}),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-element-editor-04.png")}),(0,o.kt)("h3",{id:"ccp-overlay"},"CCP Overlay"),(0,o.kt)("p",null,"The ",(0,o.kt)("strong",{parentName:"p"},"Actions")," panel in the CCP overlay drawer displays the CTI Action buttons where your agents have easy access to them as they are interacting with customers."),(0,o.kt)("p",null,(0,o.kt)("em",{parentName:"p"},"The screenshots below are showcasing the CTI Actions and their behavior in the CCP Overlay panel, not the individual CTI Flows shown.")),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-overlay-01.png")}),(0,o.kt)("p",null,'If a CTI Action requires additional input by the agent, its name will be followed by an arrow and when the agent clicks on this button, it will open the configured form. Otherwise, it will be shown with an "Execute" button next to its name.'),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-overlay-02-detail.png")}),(0,o.kt)("h3",{id:"example"},"Example"),(0,o.kt)("p",null,"In this section we demonstrate how to use CTI Actions and how they interact with CTI Flows through an example."),(0,o.kt)("p",null,"Here we setup a CTI Action and Flow to create a Salesforce Task to callback a customer and pop it. The end goal is to have a Task with the subject ",(0,o.kt)("em",{parentName:"p"},"Callback - FirstName - LastName")," and the number to callback in the comments section of the Task. If a contact exists for that number, we will also link it in the Task.\nWe use a CTI Action to do this to let the agent enter the customer's first and last name and callback number if it is different from the number used to call in.\nThis action looks like this in the CCP Overlay."),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CallbackCustomerInfoCtiActionOverlay.png")}),(0,o.kt)("p",null,"To achieve this, we need to setup a CTI Action then a CTI Flow."),(0,o.kt)("p",null,"First, we setup the CTI Action. To do that we need to have created a CTI Flow with the ",(0,o.kt)("strong",{parentName:"p"},"CTI Actions")," as source. For now we create an empty Flow, which we will build later, just to reference it in the Action."),(0,o.kt)("p",null,"The first step is to name and link the Action to a Flow."),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionName.png")}),(0,o.kt)("p",null,"The second step is to add hardcoded fields to the payload, if desired. In this example we add part of the Task subject as hardcoded fields to demonstrate the functionality."),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionPayload.png")}),(0,o.kt)("p",null,"Finally, as shown previously, the action is a form, that means it has additional data that the agent can provide. Below are images showing how they are setup for this example."),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionAddDataOverview.png")}),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionAddDataFields.png")}),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionAddDataFN.png")}),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionAddDataLN.png")}),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActionAddDataCbNumber.png")}),(0,o.kt)("p",null,"Then, we setup the CTI Flow. As mentioned above, it's possible to have the callback number different from the number used to call in, or it could be the same. If it's the same, we don't want the agent to enter the number again, in fact we can get that number in the CTI Flow. In the flow we use the ",(0,o.kt)("strong",{parentName:"p"},"Get Contact Properties")," block to get the phone number of the contact. Then using the ",(0,o.kt)("strong",{parentName:"p"},"Is Truthy?")," block, we check if the agent entered a callback number in the form or not. Depending on wether they did or not, we get the Salesforce Contact and create a Task using the correct callback number.\nIn the Flow we reference the CTI Action fields by using ",(0,o.kt)("inlineCode",{parentName:"p"},"$.payload.fieldKey")," for both the hardcoded payload and the fields in the additional data form (Take a look at the ",(0,o.kt)("strong",{parentName:"p"},"Create a Task")," blocks in the flow below)."),(0,o.kt)("img",{src:(0,i.Z)("/img/shared/CtiActioCtiFlow.png")}),(0,o.kt)("a",{target:"_blank",href:(0,i.Z)("/json/cti-flow-examples/shared/10-Create+Callback+Task.json"),download:"10-Create+Callback+Task.json"},"Download Flow"),(0,o.kt)("p",null,"To test this action, you can place or accept a call from the CCP, open the overlay, fill in the form then submit it. If everything is setup correctly, a Task should pop up with the desired information."),(0,o.kt)("h3",{id:"receiving-data-from-cti-flows"},"Receiving Data from CTI Flows"),(0,o.kt)("p",null,"In addition to agents sending data to the CTI Flow, they can also receive data from a CTI Flow.. When a CTI Flow sends some information to the CCP overlay, it will be displayed in the Data panel."),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-overlay-04-data.png")}),(0,o.kt)("p",null,"Here is how you would configure your CTI Flow to send data back to the CCP overlay."),(0,o.kt)("img",{src:(0,i.Z)("/img/classic/ccp-overlay-6-data.png")}),(0,o.kt)("h2",{id:"upgrading-from-an-earlier-version"},"Upgrading from an earlier version"),(0,o.kt)("p",null,"If you are upgrading the Salesforce package from an earlier version of CTI Adapter, there are a few additional steps to follow:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Go to Setup"),(0,o.kt)("li",{parentName:"ol"},'In "Quick Find," search for "Picklist Value Sets" and click on the result.'),(0,o.kt)("li",{parentName:"ol"},'Select "AC_CtiScriptSource" on "Picklist Value Sets" page.'),(0,o.kt)("li",{parentName:"ol"},'Scroll down to "Values" section'),(0,o.kt)("li",{parentName:"ol"},'Click "New" to add a new value.'),(0,o.kt)("li",{parentName:"ol"},'In the textarea, enter "ctiAction" and save'),(0,o.kt)("li",{parentName:"ol"},'Scroll down to the new field you added, "ctiAction," and click "Edit."'),(0,o.kt)("li",{parentName:"ol"},'Update the label to "CTI Action" and save.')))}h.isMDXComponent=!0}}]);