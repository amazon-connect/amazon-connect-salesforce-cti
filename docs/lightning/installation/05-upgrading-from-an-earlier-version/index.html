<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-lightning/installation/05-upgrading-from-an-earlier-version">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Upgrading from an Earlier Version | Amazon Connect Salesforce CTI Adapter</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Upgrading from an Earlier Version | Amazon Connect Salesforce CTI Adapter"><meta data-rh="true" name="description" content="Upgrading the Salesforce Lambdas"><meta data-rh="true" property="og:description" content="Upgrading the Salesforce Lambdas"><link data-rh="true" rel="icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-rh="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version" hreflang="en"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UE7MTAXIA1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.9a505dc2.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.9d61f365.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.863d49bc.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><div class="navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">v5.22.0</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">CTI Adapter</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/12-amazonq-integration">Amazon Q Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/13-voice-id">Voice Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/14-medialess">Setting up Medialess</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Salesforce Lambdas</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Appendices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0">Appendix A: Required Salesforce Configurations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/amazon-connect-salesforce-cti/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Installation</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Upgrading from an Earlier Version</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Upgrading from an Earlier Version</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-the-salesforce-lambdas">Upgrading the Salesforce Lambdas<a class="hash-link" href="#upgrading-the-salesforce-lambdas" title="Direct link to heading">​</a></h2><p>The Amazon Connect Salesforce Lambda (ACSF Lambda) package contains a set of common Lambda functions to be used by Amazon Connect to interact with Salesforce, allowing lookup, create and update operations for different Salesforce objects, like Contacts and Cases. Upgrading the Salesforce lambdas is necessary if you have an existing lambda package and you wish to upgrade to a newer runtime version.</p><p>To upgrade your lambdas to use the new python version, continue reading.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="deploying-the-new-lambda-package">Deploying the New Lambda Package<a class="hash-link" href="#deploying-the-new-lambda-package" title="Direct link to heading">​</a></h3><p>Gather the data in your lambda CloudFormation stack. </p><ol><li>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS console</a>.</li><li>Navigate to the CloudFormation console.</li><li>Ensure you are in the correct region.</li><li>If you are not already on the Stacks page, click Stacks listed in the left-hand navigation pane.<ul><li>It should look similar to this</li><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/lambdacf1.png" class="img_ev3q"></li></ul></li><li>Find and click the previously-deployed stack in the list.</li><li>In the split panel that appears for the stack, click on the Parameters tab.</li><li>The list of parameters used for the previously-deployed stack will appear.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/lambdacf2.png" class="img_ev3q"></li></ul></li></ol><p>Verify the information you used to create the lambdas. For a refresher, this would be the information you found as part of <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup/#prerequisite-configuration-and-data-collection">Prerequisite Configuration and Data Collection</a>, <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup/#check-your-salesforce-api-version">Finding your salesforce version</a>, and <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup/#gather-amazon-connect-information">Gather Amazon Connect Information</a>.</p><p>Once you have verified and gathered all of the information, you will install the salesforce lambda package. Instructions on how to install the lambda package <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup/#install-the-amazon-connect-salesforce-lambda-package">can be found here</a>, and instructions on testing the lambda package after installation <a href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup/#test-the-core-functionality">can be found here</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="removing-the-previous-lambda-package">Removing the Previous Lambda Package<a class="hash-link" href="#removing-the-previous-lambda-package" title="Direct link to heading">​</a></h3><p>At this point, you now have the newer version of the lambda package and the older version of the lambda package. We now want to remove the original lambda package. but this needs to be done with care since this lambda package was configured to work with the connect and salesforce instances. Before removing the old lambda package, we must first do two (2) things</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="unlink-the-sfinvokeapi-function">Unlink the sfInvokeAPI Function<a class="hash-link" href="#unlink-the-sfinvokeapi-function" title="Direct link to heading">​</a></h4><ol><li>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS console</a>.</li><li>Navigate to the Amazon Connect Console.</li><li>Select your Instance Alias.</li><li>In the navigation pane, choose &quot;Flows&quot;.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/connectflowpane1.png" class="img_ev3q"></li></ul></li></ol><p>Once in the &quot;Flows&quot; pane of the Connect console of the instance to be configured, verify that the previous Lambda function is listed, then remove it by clicking “Remove.” </p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/connectflowpane2.png" class="img_ev3q"><p>After the old Lambda function has been removed, proceed with the remaining steps:</p><ol><li>For AWS Lambda, select the function that includes sfInvokeAPI from the new lambda package in the name.</li><li>Choose Add Lambda Function. Confirm that the function is added under Lambda Functions.</li><li>The AWS Lambda function has been added to your Amazon Connect instance!</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="remove-triggers-from-the-lambda-functions-of-the-previously-deployed-stack">Remove triggers from the Lambda functions of the previously-deployed stack<a class="hash-link" href="#remove-triggers-from-the-lambda-functions-of-the-previously-deployed-stack" title="Direct link to heading">​</a></h4><p>In the documentation steps <a href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">“Amazon Connect Historical Metrics in Salesforce”</a> and <a href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">“Postcall Contact Lens Import”</a>, you are instructed to create AWS Lambda Triggers for certain Lambda functions in order to store relevant data in S3 bucket folders. If the Lambdas of the previously-deployed stack have triggers which point to the same file path (i.e., S3 bucket, Prefix, and Suffix) that is listed in the documentation instructions, this will prevent the creation of triggers for new Lambda functions pointing to that same path. </p><p>To delete the old triggers, </p><ol><li>In a new browser tab, login to the AWS console.</li><li>Navigate to the Lambda console.</li><li>Navigate to a specific function which holds an old trigger.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletetrigger1.png" class="img_ev3q"></li></ul></li><li>For each function, go to its Configuration tab (under the Function overview) and ensure you are in the Triggers tab (in the left-hand side, listed under General Configuration). Clicking on the rectangle with the S3 bucket icon (representing the trigger) in the Function overview should also bring you to the correct pane.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletetrigger2.png" class="img_ev3q"></li></ul></li><li>Once there, click the Details arrow to expand the details section and verify that the trigger you see has the same file path you wish to reclaim for your new Lambda function. If so, click its checkbox and then click delete in the upper right-hand corner of the Triggers pane.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletetrigger3.png" class="img_ev3q"></li><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletetrigger4.png" class="img_ev3q"></li></ul></li><li>Repeat this process (step 3 - step 5) for each old Lambda function until all the file paths you wish to use are freed up. Those file paths will now be available for use in the Amazon Connect Salesforce Lambda setup steps which involve creating triggers.  </li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="delete-the-previously-deployed-stack">Delete the Previously-Deployed Stack<a class="hash-link" href="#delete-the-previously-deployed-stack" title="Direct link to heading">​</a></h4><p>Once you have confirmed your successful upgrade of the Amazon Connect Salesforce Lambda, you may delete your previously-deployed stack of the older version of the Lambda package. To delete the previously-deployed stack, </p><ol><li>In a new browser tab, login to the AWS console.</li><li>Navigate to the CloudFormation console.</li><li>Ensure you are in the correct region.</li><li>If you are not already on the Stacks page, click Stacks listed in the left-hand navigation pane.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/lambdacf1.png" class="img_ev3q"></li></ul></li><li>Find and click the previously-deployed stack in the list.</li><li>In the split panel that appears for the stack, validate in the Stack info tab that the selected stack is the one you wish to delete.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletelambdastack1.png" class="img_ev3q"></li></ul></li><li>Click the Delete button in the split panel, then Delete in the pop-up confirmation message that appears.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletelambdastack2.png" class="img_ev3q"></li></ul></li><li>The stack will then begin to be deleted. This may take a few minutes; it is not necessary to stay on the page.</li><li>Confirm that the stack was successfully completed. If you have navigated away from the page, change the Filter status at the top of the Stacks list to Deleted, and verify that the previously-deployed Lambda stack appears marked DELETE_COMPLETE.<ul><li><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/deletelambdastack3.png" class="img_ev3q"></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="upgrading-the-cti-adapter">Upgrading the CTI Adapter<a class="hash-link" href="#upgrading-the-cti-adapter" title="Direct link to heading">​</a></h2><p>If you are upgrading from an earlier version of CTI Adapter, there are a
few additional things you need to do.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ac-cti-adapter">AC CTI Adapter<a class="hash-link" href="#ac-cti-adapter" title="Direct link to heading">​</a></h3><ol><li><p>Go to the <strong>Setup</strong> section and search for <strong>Object Manager</strong>.</p></li><li><p>In Object Manager section, search for &quot;AC CTI&quot;</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image104.png" class="img_ev3q"><ol start="3"><li><p>Open up <strong>AC CTI Adapter</strong></p></li><li><p>On the left sidebar, click on <strong>Page Layouts</strong></p></li><li><p>Click on <strong>Page Layout Assignment</strong></p></li><li><p>On the next page, click on <strong>Edit Assignments</strong></p></li><li><p>Click on the grey bar at the top of the table to select all rows.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image105.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image106.png" class="img_ev3q"><ol start="8"><li><p>Open the <strong>Page Layout to Use</strong> dropdown and select <strong>AC CTI Adapter
Layout -- August 2020</strong>.</p></li><li><p>Click <strong>Save</strong> and go back to <strong>Page Layouts</strong>.</p></li><li><p>Click on the dropdown next to the item labelled <strong>AC CTI Adapter
Layout</strong> and click <strong>Delete</strong>.</p></li><li><p>Confirm <strong>Yes</strong> in the next dialogue where you will be asked &quot;Are
you sure?&quot;</p></li><li><p>If you see a screen titled <strong>Deletion Problems</strong>, find and click
<strong>Delete</strong>.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image107.png" class="img_ev3q"><ol start="13"><li>You will be asked which layout you want to replace it with. Select
<strong>AC CTI Adapter Layout -- August 2020</strong> and click <strong>Replace.</strong></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image108.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="ac-cti-script">AC CTI Script<a class="hash-link" href="#ac-cti-script" title="Direct link to heading">​</a></h3><p>Now we are going to do the same thing for <strong>AC CTI Script Layout</strong>.</p><ol><li><p>Open up <strong>AC CTI Script Layout</strong></p></li><li><p>On the left sidebar, click on <strong>Page Layouts</strong></p></li><li><p>Click on <strong>Page Layout Assignment</strong></p></li><li><p>On the next page, click on <strong>Edit Assignments</strong></p></li><li><p>Click on the grey bar at the top of the table to select all rows.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image109.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image110.png" class="img_ev3q"><ol start="6"><li><p>Open the <strong>Page Layout to Use</strong> dropdown and select <strong>AC CTI Flow
Layout</strong>.</p></li><li><p>Click <strong>Save</strong> and go back to <strong>Page Layouts</strong>.</p></li><li><p>Click on the dropdown next to the item labelled <strong>AC CTI Script
Layout</strong> and click <strong>Delete</strong>.</p></li><li><p>Confirm <strong>Yes</strong> in the next dialogue where you will be asked &quot;Are
you sure?&quot;</p></li><li><p>If you see a screen titled <strong>Deletion Problems</strong>, find and click
<strong>Delete</strong>.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image107.png" class="img_ev3q"><ol start="11"><li>You will be asked which layout you want to replace it with. Select
<strong>AC CTI Flow Layout</strong> and click <strong>Replace.</strong></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image111.png" class="img_ev3q"><ol start="12"><li><p>Go to your <strong>CTI Adapter</strong>.</p></li><li><p>Click on any of the CTI Flows and scroll down to the section labeled
<strong>CTI Flow</strong>. You should see something like this:</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image112.png" class="img_ev3q"><ol start="14"><li><p>Click <strong>Download</strong> and save your script before clicking
<strong>Continue</strong>.</p></li><li><p>Use the CTI Block primitives in the editor to re-create your script
as a CTI Flow.</p></li><li><p>Refer to the Sample Flows in the Appendix of this manual.</p></li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/02-installation/05-upgrading-from-an-earlier-version.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Setting Up The Salesforce Lambdas Manually</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CTI Adapter Installation Troubleshooting and Common Issues</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#upgrading-the-salesforce-lambdas" class="table-of-contents__link toc-highlight">Upgrading the Salesforce Lambdas</a><ul><li><a href="#deploying-the-new-lambda-package" class="table-of-contents__link toc-highlight">Deploying the New Lambda Package</a></li><li><a href="#removing-the-previous-lambda-package" class="table-of-contents__link toc-highlight">Removing the Previous Lambda Package</a></li></ul></li><li><a href="#upgrading-the-cti-adapter" class="table-of-contents__link toc-highlight">Upgrading the CTI Adapter</a><ul><li><a href="#ac-cti-adapter" class="table-of-contents__link toc-highlight">AC CTI Adapter</a></li><li><a href="#ac-cti-script" class="table-of-contents__link toc-highlight">AC CTI Script</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.9d61f365.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.863d49bc.js"></script>
</body>
</html>