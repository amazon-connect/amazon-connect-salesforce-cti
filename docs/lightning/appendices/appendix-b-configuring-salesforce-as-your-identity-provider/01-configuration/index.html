<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Appendix B: Configuring Salesforce as Your Identity Provider | Amazon Connect Salesforce CTI Adapter</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Appendix B: Configuring Salesforce as Your Identity Provider | Amazon Connect Salesforce CTI Adapter"><meta data-rh="true" name="description" content="Prerequisites"><meta data-rh="true" property="og:description" content="Prerequisites"><link data-rh="true" rel="icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-rh="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration" hreflang="en"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UE7MTAXIA1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.fb67a301.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.68a587ff.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.98d34c11.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><div class="navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">v5.29</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Notices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/lightning/introduction/01-key-benefits">Key Benefits and Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/installation/06-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">CTI Adapter</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/01-cti-adapter-configuration">CTI Adapter Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/02-cti-attributes">CTI Attributes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/03-cti-flows">CTI Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/04-presence-sync-rules">Presence Sync Rules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/05-localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/06-set-agent-status-on-session-end">Set Agent Status on Session End</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/07-contact-lens">Contact Lens</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/08-cti-actions">CTI Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/09-recording-controls">Recording Controls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/10-voicemail-drops">Voicemail Drops</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/11-chat-widget-integration">Chat Widget Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/12-amazonq-integration">Amazon Q Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/13-voice-id">Voice Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/14-medialess">Setting up Medialess</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/15-vdi">Setting up VDI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/16-global-resiliency">Global Resiliency</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/cti-adapter/17-mini-lightning-adapter">Mini Lightning Adapter</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Salesforce Lambdas</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Accessing the Salesforce API from Amazon Connect Contact Flows Using AWS Lambda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/02-historical-metrics">Amazon Connect Historical Metrics in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/03-real-time-metrics">Amazon Connect Real-Time Metrics in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/04-contact-channel-analytics">Contact Channel Analytics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/05-contact-trace-record-import">Contact Trace Record Import</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/salesforce-lambdas/06-postcall-contact-lens-import">Postcall Contact Lens Import</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Appendices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" tabindex="0">Appendix A: Required Salesforce Configurations</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/01-configuring-my-domain">Configuring My Domain in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel">Configure Salesforce Omnichannel for Testing</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix C: CTI Flow Sources and Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-d-cti-flow-examples/01-cti-flow-examples">Appendix D: CTI Flow Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-e-salesforce-high-velocity-sales/01-high-velocity-sales">Appendix E: Integration with Salesforce High Velocity Sales</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-f-cti-flow-blocks/01-cti-flow-blocks">Appendix F: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/amazon-connect-salesforce-cti/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Appendices</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Appendix B: Configuring Salesforce as Your Identity Provider</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Appendix B: Configuring Salesforce as Your Identity Provider</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a class="hash-link" href="#prerequisites" title="Direct link to heading">​</a></h3><p>To complete the SSO integration between Salesforce and Amazon Connect,
you need:</p><ol><li><p>An Amazon Connect Instance configured for SAML authentication</p></li><li><p>Appropriate AWS permissions to create Identity and Access Management
(IAM) roles and policies</p></li><li><p>Administrator permissions for your Salesforce Org</p></li><li><p>Amazon Connect CTI Adapter AppExchange package installed and
configured</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-salesforce-as-an-identity-provider">Configuring Salesforce as an Identity Provider<a class="hash-link" href="#configuring-salesforce-as-an-identity-provider" title="Direct link to heading">​</a></h3><p>First, we need to enable Salesforce to act as an identity provider
(IdP). An IdP performs end user authentication and provides the
credentials to the requesting service provider. In this case, Salesforce
server as the IdP and Amazon Connect the service provider, while being
embedded in Salesforce.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="setup-identity-provider--download-metadata">Setup Identity Provider &amp; Download Metadata<a class="hash-link" href="#setup-identity-provider--download-metadata" title="Direct link to heading">​</a></h4><ol><li><p>Log in into your Salesforce org and go to <strong>Setup</strong>.</p></li><li><p>In the <strong>Quick Find</strong> field, type <strong>Identity Provider,</strong> then select
<strong>Identity Provider</strong> from the result list</p></li><li><p>Identity Provider may be enabled by default. If not, choose <strong>Enable
Identity Provider</strong>, then select the appropriate certificate and
select Save.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image234.png" class="img_ev3q"><ol start="4"><li>Choose <strong>Download Metadata</strong> and save the file to your computer.</li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image235.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-identity-provider-policy-and-role-in-the-aws-console">Configure the Identity Provider, Policy, and Role in the AWS Console<a class="hash-link" href="#configure-the-identity-provider-policy-and-role-in-the-aws-console" title="Direct link to heading">​</a></h3><p>Next, you need to configure the identity provider (Salesforce) in the
AWS console and provide access to Amazon Connect via IAM policies and
roles. This allows AWS to acknowledge Salesforce as the identity
provider and to provide users authenticated through Salesforce with the
access required to login to Amazon Connect.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-identity-provider">Configure the Identity Provider<a class="hash-link" href="#configure-the-identity-provider" title="Direct link to heading">​</a></h4><ol><li><p>Login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer"><strong>AWS console</strong></a></p></li><li><p>Open the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">AWS identity and Access Management (IAM)
Console</a></p></li><li><p>Select <strong>Identity providers</strong></p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image236.png" class="img_ev3q"><ol start="4"><li><p>Choose <strong>Add Provider</strong></p></li><li><p>On the Configure Provider screen, select <strong>SAML</strong> as the Provider
Type</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/shared/image07.png" class="img_ev3q"><ol start="6"><li><p>Set the Provider Name to <strong>SalesforceConnect</strong></p></li><li><p>Import the metadata file you downloaded previously by selecting
Choose File and navigating to the downloaded metadata file.</p></li><li><p>Select Next Step</p></li><li><p>Choose Create</p></li><li><p>The Identity provider has been created</p></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-iam-role-and-policy">Create the IAM Role and Policy<a class="hash-link" href="#create-the-iam-role-and-policy" title="Direct link to heading">​</a></h4><ol><li><p>Login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer"><strong>AWS console</strong></a></p></li><li><p>Open the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">AWS identity and Access Management (IAM)
Console</a></p></li><li><p>Select <strong>Roles,</strong> then choose <strong>Create role</strong></p></li><li><p>Choose <strong>SAML 2.0 federation</strong></p></li><li><p>In the SAML provider dropdown, select the provider you just created,
which should be named <strong>SalesforceConnect</strong></p></li><li><p>Select the radio button for <strong>Allow programmatic and AWS Management
Console access</strong>. The Attribute and Value fields should
auto-populate</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image238.png" class="img_ev3q"><ol start="7"><li><p>Select <strong>Next: Permissions</strong></p></li><li><p>On the Attach permissions policies page, select <strong>Create policy.</strong>
This will open a new browser tab.</p></li><li><p>Choose the <strong>JSON</strong> tab to switch to the JSON editor</p></li><li><p>Replace the existing JSON with the following:</p></li></ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Version&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Statement&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Sid&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Statement1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Effect&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Allow&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Action&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;connect:GetFederationToken&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Resource&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;**YOUR ARN**/user/${aws:userid}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="11"><li><p>Replace <strong>YOUR ARN</strong> with the ARN of your Amazon Connect
instance. To find your Amazon Connect instance ARN:</p></li><li><p>Open a new tab in your browser and navigate to <a href="https://console.aws.amazon.com/connect/home" target="_blank" rel="noopener noreferrer">Amazon Connect
Console</a></p></li><li><p>Click on the name (alias) of your Amazon Connect instance</p></li><li><p>Copy the Instance ARN and paste it to your computer&#x27;s notepad (you
will use it in a few places)</p></li><li><p>Choose <strong>Review policy</strong></p></li><li><p>Set the Name to <strong>SalesforceConnectPolicy</strong></p></li><li><p>Select <strong>Create Policy</strong></p></li><li><p>Once the Policy has been created, close the tab, go back to the
original (Role) tab in your browser and select the <strong>Refresh</strong>
button (do not refresh the browser)</p></li><li><p>In the search field, enter <strong>SalesforceConnectPolicy</strong> and select
the box to attach the policy.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image239.png" class="img_ev3q"><ol start="20"><li><p>Choose <strong>Next: Tags</strong> and set tags if desired, then choose <strong>Next:
Review</strong></p></li><li><p>Name the Role <strong>SalesforceConnectRole</strong> and provide a description if
you like</p></li><li><p>Select Create role</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-the-base-salesforce-configuration">Complete the Base Salesforce Configuration<a class="hash-link" href="#complete-the-base-salesforce-configuration" title="Direct link to heading">​</a></h3><p>Next, you need to configure a Connect App in Salesforce and provide
further configuration to complete the SAML integration.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-connected-app-in-salesforce">Create the Connected App in Salesforce<a class="hash-link" href="#create-the-connected-app-in-salesforce" title="Direct link to heading">​</a></h4><ol><li><p>Log in into your Salesforce org and go to <strong>Setup</strong></p></li><li><p>In the <strong>Quick Find</strong> field, type <strong>App Manager,</strong> then select <strong>App
Manager</strong> from the result list</p></li><li><p>Select New Connected App</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image240.png" class="img_ev3q"><ol start="4"><li><p>Provide a name for the Connected App, such as <strong>AmazonConnectSAML,</strong>
then press tab and the API Name should auto-populate</p></li><li><p>Provide an email contact address</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image241.png" class="img_ev3q"><ol start="6"><li><p>In the Web App Settings section, choose <strong>Enable SAML</strong></p></li><li><p>Leave Start URL empty</p></li><li><p>Set Entity Id to the same name that you gave the Identity Provider
in the IAM console, which should be <strong>SalesforceConnect</strong></p></li><li><p>Set ACS URL as <strong><a href="https://signin.aws.amazon.com/saml" target="_blank" rel="noopener noreferrer">https://signin.aws.amazon.com/saml</a></strong></p></li><li><p>Set Subject Type as <strong>Persistent ID</strong></p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image242.png" class="img_ev3q"><ol start="11"><li><p>Choose <strong>Save</strong>. The screen should refresh and the new Connected App
should be displayed</p></li><li><p>Scroll down to the <strong>Custom Attributes</strong> section and select <strong>New</strong></p></li><li><p>Set Key as
<strong><a href="https://aws.amazon.com/SAML/Attributes/RoleSessionName" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/SAML/Attributes/RoleSessionName</a></strong></p></li><li><p>Set Value as <strong>$User.Email</strong></p></li><li><p>Select <strong>Save</strong></p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image243.png" class="img_ev3q"><ol start="16"><li><p>Select New again to configure another custom attribute</p></li><li><p>Set Key as <strong><a href="https://aws.amazon.com/SAML/Attributes/Role" target="_blank" rel="noopener noreferrer">https://aws.amazon.com/SAML/Attributes/Role</a></strong></p></li><li><p>The Value is going to be a combination of the Indentity Provider and
IAM Role ARNs.</p><p>a.  In a new tab, open the <a href="https://console.aws.amazon.com/iam/home" target="_blank" rel="noopener noreferrer">AWS identity and Access Management (IAM)
Console</a></p><p>b.  On the left navigation, select <strong>Identity providers</strong></p><p>c.  Select the Identity provider you created earlier, which should
be named <strong>SalesforceConnect</strong></p><p>d.  Copy the <strong>Provider ARN</strong> to your computer&#x27;s notepad</p><p>e.  Return to the IAM console and select <strong>Roles</strong></p><p>f.  Select the Role you created earlier, which should be
<strong>SalesforceConnectRole</strong></p><p>g.  Copy the <strong>Role ARN</strong> to your computer&#x27;s notepad</p><p>h.  Format the combined value as follows:
&#x27;Identity Provider ARN&#x27; &amp; &#x27;,&#x27; &amp; &#x27;Role ARN&#x27;</p><p>i.  Paste the formatted value into the Custom Attribute Value</p></li><li><p>Select <strong>Save</strong></p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image244.png" class="img_ev3q"><ol start="20"><li><p>At the top of the Connected App description, select <strong>Manage</strong></p></li><li><p>Scroll down to the <strong>SAML login Information</strong> section</p></li><li><p>Copy the <strong>IdP-Initiated Login URL</strong> to your computer&#x27;s notepad</p></li><li><p>Scroll down to find the Profiles section, then select <strong>Manage
Profiles</strong></p></li><li><p>Select a profile from the list, for example System Administrator for
testing purposes</p></li><li><p>Choose <strong>Save</strong></p></li><li><p>Open a new tab in your browser and navigate to IdP-Initiated Login
URL that you copied in an earlier step</p></li><li><p>The browser will redirect to AWS Console and log you in
automatically as a federated user
<strong>Note:</strong> you may be able to see AWS services, but you should have
no configuration rights.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image245.png" class="img_ev3q"><ol start="28"><li><p>The Federated Login consists of the Role name and your Salesforce
email address.</p></li><li><p>Initial validation is complete</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="complete-the-amazon-connect-configuration">Complete the Amazon Connect Configuration<a class="hash-link" href="#complete-the-amazon-connect-configuration" title="Direct link to heading">​</a></h3><p>The last step in the SAML setup is to add users to Amazon Connect that
exist in your Salesforce org, then validate login. It is critical that
the usernames for both platforms match exactly.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-users-to-amazon-connect">Add Users to Amazon Connect<a class="hash-link" href="#add-users-to-amazon-connect" title="Direct link to heading">​</a></h4><ol><li><p>In a new browser tab, login to the <a href="https://console.aws.amazon.com/" target="_blank" rel="noopener noreferrer">AWS
console</a></p></li><li><p>Open the <a href="https://console.aws.amazon.com/connect/home" target="_blank" rel="noopener noreferrer">Amazon Connect
Console</a></p></li><li><p>Select the name (alias) of your Amazon Connect instance</p></li><li><p>Choose <strong>Log in for emergency access</strong></p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/shared/image08.png" class="img_ev3q"><ol start="5"><li><p>Within the Amazon Connect administration portal, select <strong>Users</strong>
then choose <strong>User Management</strong></p></li><li><p>Leave <strong>Create and setup a new user</strong> selected and choose <strong>Next</strong></p></li><li><p>Complete the First and Last name fields as appropriate</p></li><li><p>Set the login name to match the <strong>Email Address</strong> of your Salesforce
user</p></li><li><p>Set the <strong>Routing Profile</strong>. In this example, the default Basic
Routing Profile is shown</p></li><li><p>Set the <strong>Security Profile</strong>. In this example, <em>Admin</em> is shown</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image247.png" class="img_ev3q"><ol start="11"><li><p>Select <strong>Save</strong></p></li><li><p>Select <strong>Create Users</strong></p></li><li><p>Repeat this process as required for your staff</p></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="final-configuration-for-the-lightning-experience">Final Configuration for the Lightning Experience<a class="hash-link" href="#final-configuration-for-the-lightning-experience" title="Direct link to heading">​</a></h3><p>Now that all of the underlying pieces are in place, the last steps are
to create the Amazon Connect Single Sign On URL and validate that it
works correctly, then configure the Lightning CTI adapter and login the
agent.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-amazon-connect-sso-url">Create the Amazon Connect SSO URL<a class="hash-link" href="#create-the-amazon-connect-sso-url" title="Direct link to heading">​</a></h4><p>You create the Amazon Connect SSO URL by combining the IdP-Initiated
Login URL that you copied earlier, and a relay state URL that will
redirect the authenticated user to your Amazon Connect instance.</p><p>The &#x27;RelayState&#x27; will be in the following format (replace <code>us-west-2</code> with the region you are using):</p><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv">https://us-west-2.console.aws.amazon.com/connect/federate/<b>InstanceId</b>?destination=%2Fconnect%2Fccp</code></pre><ol><li><p>To begin, format the relay state URL by replacing <strong>InstanceId</strong>
with your Instance Id. To find your Amazon Connect Instance Id:</p><p>a.  Open a new tab in your browser and navigate to the <a href="https://console.aws.amazon.com/connect/home" target="_blank" rel="noopener noreferrer">Amazon
Connect Console</a></p><p>b.  Click on the name (alias) of your Amazon Connect</p><p>c.  From the Instance ARN, copy the portion after the &#x27;/&#x27;. This is
the Instance Id</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/shared/image05.png" class="img_ev3q"><ol start="2"><li>Concatenate the &#x27;IdP-Initiated Login URL&#x27; and the &#x27;RelayState&#x27;, by
combining the two with &quot;&amp;RelayState=&quot; in between, for example:</li></ol><pre tabindex="0" class="codeBlockStandalone_MEMb thin-scrollbar codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><code class="codeBlockLines_e6Vv">https://mXXXXXXrun-dev-ed.my.salesforce.com/idp/login?app=0sp0N000000Caid&amp;RelayState=https://us-west-2.console.aws.amazon.com/connect/federate/<b>InstanceId</b>?destination=%2Fconnect%2Fccp</code></pre><ol start="3"><li><p>This is the Final SSO URL, needed for the Amazon Connect Lightning
CTI Adapter Configuration.</p></li><li><p>To validate this URL:</p><p>a.  Open a new tab in the same browser that you are logged into
Salesforce</p><p>b.  Paste the fully concatenated URL into the new browser and press
enter</p><p>c.  You should automatically login and be redirected to the Amazon
Connect Contact Control Panel.</p></li><li><p>Once you validate the full URL, you are ready to add it to the
Lightning Adapter</p></li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="configure-the-cti-lightning-adapter-in-salesforce-for-sso">Configure the CTI Lightning Adapter in Salesforce For SSO<a class="hash-link" href="#configure-the-cti-lightning-adapter-in-salesforce-for-sso" title="Direct link to heading">​</a></h4><p>Now we are ready to complete the last step in the configuration process:
Adding the SSO settings for Salesforce to the Lightning Adapter. This
will configure the adapter to authenticate via SSO and redirect to the
Amazon Connect Contact Control Panel once authentication completes.</p><ol><li><p>Log in into your Salesforce org and go to the <strong>Service Console</strong></p></li><li><p>Expand the <strong>navigation menu</strong> by selecting the down arrow and
choose <strong>AC CTI Adapters</strong>.</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image114.png" class="img_ev3q"><ol start="3"><li><p>Select <strong>ACLightningAdapter</strong></p></li><li><p>Scroll down to the Single SignOn (SSO) section and choose the pencil
icon of either field to edit</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image115.png" class="img_ev3q"><ol start="5"><li><p>For the SSO Url, copy the first part of the SSO URL that you created
previously, up to the first question mark (do not copy the question
mark), for example:</p><p><code>https://mXXXXXrun-dev-ed.my.salesforce.com/idp/login?app=0sp0N000000Caid&amp;RelayState=https://us-west-2.console.aws.amazon.com/connect/federate/&lt;b&gt;InstanceId&lt;/b&gt;?destination=%2Fconnect%2Fccp</code></p></li><li><p>Paste this portion of the URL into the <strong>SSO Url</strong> field</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image116.png" class="img_ev3q"><ol start="7"><li><p>For the SSO Relay State, copy everything AFTER the question mark (do
not copy the question mark), for example:</p><p><code>https://mXXXXXXrun-dev-ed.my.salesforce.com/idp/login?app=0sp0N000000Caid&amp;RelayState=https://us-west-2.console.aws.amazon.com/connect/federate/&lt;b&gt;InstanceId&lt;/b&gt;?destination=%2Fconnect%2Fccp</code></p></li><li><p>Paste this portion of the URL into the <strong>SSO Relay State</strong> field</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image117.png" class="img_ev3q"><ol start="9"><li>Choose <strong>Save</strong></li></ol><blockquote><p><strong>Note: With the new Amazon Connect instance urls (<code>*.my.connect.aws</code>) you must put the full URL into the <code>Amazon Connect Instance</code> field in the AC CTI Adapter record for SSO to work. Ex: using <code>https://myinstance.my.connect.aws</code> instead of <code>my instance</code>.</strong></p></blockquote><ol start="10"><li><p><strong>Refresh</strong> your browser to make the changes take effect</p><p>a.  <strong>NOTE:</strong> If you receive a blocked popup warning, select the
warning and change the setting to always allow popups from your
Salesforce org, then refresh the browser again</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image118.png" class="img_ev3q"><ol start="11"><li><p>Select the <strong>phone icon</strong> in
the console toolbar to open the CCP
Note: You may also receive popups to allow notifications and
microphone access. Please accept both.</p></li><li><p>Click the Sign into CCP button</p></li><li><p>You should now see the authenticated and logged in CCP</p></li></ol><img loading="lazy" src="/amazon-connect-salesforce-cti/img/lightning/image120.png" class="img_ev3q"><ol start="14"><li>Configuration is complete</li></ol></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/lightning/05-appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuration.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-a-required-salesforce-configurations/02-configure-salesforce-omnichannel"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configure Salesforce Omnichannel for Testing</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/amazon-connect-salesforce-cti/docs/lightning/appendices/appendix-c-cti-flow-sources-and-events/01-cti-flow-sources-and-events"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Appendix C: CTI Flow Sources and Events</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link toc-highlight">Prerequisites</a></li><li><a href="#configuring-salesforce-as-an-identity-provider" class="table-of-contents__link toc-highlight">Configuring Salesforce as an Identity Provider</a></li><li><a href="#configure-the-identity-provider-policy-and-role-in-the-aws-console" class="table-of-contents__link toc-highlight">Configure the Identity Provider, Policy, and Role in the AWS Console</a></li><li><a href="#complete-the-base-salesforce-configuration" class="table-of-contents__link toc-highlight">Complete the Base Salesforce Configuration</a></li><li><a href="#complete-the-amazon-connect-configuration" class="table-of-contents__link toc-highlight">Complete the Amazon Connect Configuration</a></li><li><a href="#final-configuration-for-the-lightning-experience" class="table-of-contents__link toc-highlight">Final Configuration for the Lightning Experience</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.68a587ff.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.98d34c11.js"></script>
</body>
</html>