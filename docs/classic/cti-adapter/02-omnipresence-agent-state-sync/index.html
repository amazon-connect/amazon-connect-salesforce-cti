<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-classic/cti-adapter/02-omnipresence-agent-state-sync">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Omnipresence Agent State Sync | Amazon Connect Salesforce CTI Adapter</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Omnipresence Agent State Sync | Amazon Connect Salesforce CTI Adapter"><meta data-rh="true" name="description" content="Amazon Connect CTI Connector supports the bidirectional synchronization"><meta data-rh="true" property="og:description" content="Amazon Connect CTI Connector supports the bidirectional synchronization"><link data-rh="true" rel="icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-rh="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync" hreflang="en"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UE7MTAXIA1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.fb67a301.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.b6dcc330.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.5b32cd97.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><div class="navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">v5.24</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Notices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/introduction/01-key-benefits-and-requirements">Key Benefits and Requirements</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">CTI Adapter</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration">CTI Adapter Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync">Omnipresence Agent State Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/03-contact-attributes-display">Contact Attributes Display</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/04-call-recording-playback">Call Recording Playback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/05-call-display-account-page">Call Display on the Account Page</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/06-outbound-campaign-calls">Outbound Campaign Calls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/07-amazon-connect-reports">Amazon Connect Reports in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/08-cti-flows">CTI Flows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/09-localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/10-cti-actions">CTI Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/11-recording-controls">Recording Controls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/12-chat-widget-integration">Chat Widget Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/13-amazonq-integration">Amazon Q Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/14-voice-id">Voice Id</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/15-medialess">Setting up Medialess</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Salesforce Lambdas</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Invoking the Amazon Connect Salesforce Lambda in a Contact Flow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Appendices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-a-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix A: CTI Flow Sources and Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuring-salesforce-as-your-identity-provider">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-c-cti-flow-examples/01-cti-flow-examples">Appendix C: CTI Flow Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-d-cti-flow-blocks/01-cti-flow-blocks">Appendix D: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/amazon-connect-salesforce-cti/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">CTI Adapter</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Omnipresence Agent State Sync</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Omnipresence Agent State Sync</h1></header><p>Amazon Connect CTI Connector supports the bidirectional synchronization
of Amazon Connect agent states with Salesforce omnichannel presence
states.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image90.png" class="img_ev3q"><p>NOTE: After Salesforce Winter ’22 Release, users need to have View Setup and Configuration OR View DeveloperName permission via a profile or permission set to use this feature. See <a href="https://help.salesforce.com/s/articleView?id=000362829&amp;type=1" target="_blank" rel="noopener noreferrer">New Permission Requirements for DeveloperName Field</a> for more information.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="enable-omnichannel">Enable Omnichannel<a class="hash-link" href="#enable-omnichannel" title="Direct link to heading">​</a></h2><p>In order to sync your Connect User status with your Omni-Channel agent
status, you must configure Omni-Channel Presence Syncing. This will make
your Omni-Channel presence status match your Amazon Connect Agent Status
and vice versa.</p><p>First, we must enable omni-channel. To do this, navigate to &quot;Setup&quot; and
type &quot;omni&quot; into the Quick Find box, then select &quot;Omni-Channel Settings&quot;
from the menu.</p><p>Note: Presence Sync is not supported for Salesforce Classic Adapters but it is supported for Salesforce Console Adapters. This feature is not turned on by default.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image91.png" class="img_ev3q"><p>Place a check in the checkbox for &quot;Enable Omni-Channel&quot;.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image92.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-presence-statuses">Create Presence Statuses<a class="hash-link" href="#create-presence-statuses" title="Direct link to heading">​</a></h2><p>In this step, we need to add and map Presence Statuses to what is
defined in Amazon Connect under Users -<!-- -->&gt;<!-- --> Agent Status.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image93.png" class="img_ev3q"><p>Open the Setup in your Salesforce Org and type &quot;presence&quot;, then select
&quot;Presence Statuses&quot; from the menu. Click the &quot;New&quot; button and add
statuses to match what is defined in Amazon Connect.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image94.png" class="img_ev3q"><p>Each status is flagged as either Online or Busy. For each status that is
marked as Online, you will need to specify a service channel to
associate the presence status.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image95.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-enabled-service-presences-status-access">Configure Enabled Service Presences Status Access<a class="hash-link" href="#configure-enabled-service-presences-status-access" title="Direct link to heading">​</a></h2><p>Next, we need to assign access to these statuses by going to Profiles in
Salesforce Setup, and ensure that the agent will be able to access the
statuses that map to their Amazon Connect statuses.</p><p>In the Salesforce Setup, under Manage Users, select Profiles, then
select the user profile to edit. Scroll down the page until you find the
section labeled &quot;Enabled Service Presence Status Access&quot;.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image96.png" class="img_ev3q"><p>Click the &quot;Edit&quot; button and on the next page, &quot;Add&quot; presence statuses
you want to have enabled for the user.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image97.png" class="img_ev3q"><h3 class="anchor anchorWithStickyNavbar_LWe7" id="amazon-connect-system-statuses">Amazon Connect System Statuses<a class="hash-link" href="#amazon-connect-system-statuses" title="Direct link to heading">​</a></h3><p>The following Amazon Connect CCP statuses are system statuses that can be used in presence sync.
Please note however that these statuses are restricted and you cannot set the Amazon Connect status
to the below.</p><ul><li>Busy - agent is in a call</li><li>Pending - agent is receiving a request for a queue callback</li><li>PendingBusy - agent is receiving call</li><li>CallingCustomer - agent is calling customer</li><li>AfterCallWork - agent is in the after call work screen</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-presence-status-synchronization-rules">Configure Presence Status Synchronization Rules<a class="hash-link" href="#configure-presence-status-synchronization-rules" title="Direct link to heading">​</a></h2><p>The Amazon Connect Salesforce CTI Adapter provides a rules-based
presence status synchronization system allowing for flexibility in
mapping agent states between Amazon Connect and Salesforce Omnichannel.</p><p>Presence synchronization actions may be configured based upon manual
agent state changes (agent goes on break), system agent state changes
(answering a call), omnichannel agent work (agent accepts an email), and
omnichannel workload changes (agent completes an email) as examples.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="presence-status-configuration-rules">Presence Status Configuration Rules<a class="hash-link" href="#presence-status-configuration-rules" title="Direct link to heading">​</a></h3><p>Presence Sync Rules are evaluated based on specific events. The
available events are:</p><ul><li><p><strong>Connect Agent State Change:</strong> The Connect agent&#x27;s state has
changed.</p></li><li><p><strong>Salesforce Agent State Change:</strong> The Salesforce agent&#x27;s state has
changed.</p><ul><li>If a rule is set up with this event and the new state is set to &quot;Offline&quot;, this will not trigger Salesforce Agent Logout</li></ul></li><li><p><strong>Salesforce Agent Logout:</strong> The Salesforce agent has logged out </p><ul><li>Logging out of Omnichannel does not automatically log you out of Connect or set CCP to offline. If you want this functionality, you will need to set up a Presence Sync rule.</li><li>Rules triggered by Salesforce Agent Logout will only work if the rule is set to trigger when Salesforce New Agent Status is equal to the exact value &quot;Offline&quot; (case sensitive without quotes)</li></ul></li><li><p><strong>Salesforce Work Accepted:</strong> The Salesforce agent has accepted
work.</p></li><li><p><strong>Salesforce Workload Changed:</strong> The Salesforce agent&#x27;s workload has
changed.</p></li></ul><p>Once the event is triggered, the CTI adapter will evaluate the provided
criteria. The criteria is established by comparing Operand A, using
standard comparator options, against Operand B. Possible options for
Operand A and B are:</p><ul><li><p><strong>Connect Agent New State:</strong> The Connect agent&#x27;s new state value</p></li><li><p><strong>Connect Agent Old State:</strong> The Connect agent&#x27;s old (previous)
state value</p></li><li><p><strong>Salesforce Agent New State:</strong> The Salesforce agent&#x27;s new state
value</p></li><li><p><strong>Salesforce Service Channel:</strong> The service channel upon which the
Salesforce agent has accepted work</p></li><li><p><strong>Salesforce Previous Workload:</strong> The Salesforce agent&#x27;s previous
workload</p></li><li><p><strong>Salesforce Previous Workload Pct:</strong> The Salesforce agent&#x27;s
pervious workload expressed as a percent of configured capacity</p></li><li><p><strong>Salesforce New Workload:</strong> The Salesforce agent&#x27;s new workload</p></li><li><p><strong>Salesforce New Workload Pct:</strong> The Salesforce agent&#x27;s new workload
expressed as a percent of configured capacity</p></li><li><p><strong>Salesforce Configured Capacity:</strong> The Salesforce agent&#x27;s
configured capacity</p></li><li><p><strong>Static Value:</strong> The user may provide a value. For example, a
custom agent state name or other alphanumeric value. When Static
Value is selected a &quot;Value&quot; field becomes visible to accept the
users static value input.</p></li></ul><p>Available comparators are:</p><ul><li><p><strong>Equal to:</strong> Are Operand A and Operand B equal</p></li><li><p><strong>Not equal to:</strong> Are Operand A and Operand B not equal</p></li><li><p><strong>Greater than:</strong> Is Operand A greater than Operand B</p></li><li><p><strong>Greater than or equal to:</strong> Is Operand A greater than or equal to
Operand B</p></li><li><p><strong>Less than:</strong> Is Operand A less than Operand B</p></li><li><p><strong>Less than or equal to:</strong> Is Operand A less than or equal to
Operand B</p></li></ul><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image98.png" class="img_ev3q"><p>The configuration setting illustrated in the previous example, are
described below:</p><ul><li><p>source -- The triggered event. In this case, an Amazon Connect agent
state change is the triggering event</p></li><li><p>destination -- The target system on which to execute the action</p></li><li><p>criteria -- The values and comparator that will be evaluated to
determine whether or not to trigger the action</p><ul><li><p>operandA -- The left side of the criteria statement</p></li><li><p>operandB -- The right side of the criteria statement</p></li><li><p>comparator -- The comparison operator used to evaluate the
criteria statement</p></li></ul></li><li><p>state -- The target agent state of the destination system</p></li></ul><p>Example rule:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image99.png" class="img_ev3q"><p>Summary: This rule is triggered when the Connect agent&#x27;s state is
changed (Source). If their state is changed to the static value (Operand
B) &quot;Lunch&quot; (Operand B Value), then the Salesforce Agent&#x27;s state
(Destination) is set to Lunch (Value).</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/classic/03-cti-adapter/02-omnipresence-agent-state-sync.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">CTI Adapter Configuration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/03-contact-attributes-display"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Contact Attributes Display</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#enable-omnichannel" class="table-of-contents__link toc-highlight">Enable Omnichannel</a></li><li><a href="#create-presence-statuses" class="table-of-contents__link toc-highlight">Create Presence Statuses</a></li><li><a href="#configure-enabled-service-presences-status-access" class="table-of-contents__link toc-highlight">Configure Enabled Service Presences Status Access</a><ul><li><a href="#amazon-connect-system-statuses" class="table-of-contents__link toc-highlight">Amazon Connect System Statuses</a></li></ul></li><li><a href="#configure-presence-status-synchronization-rules" class="table-of-contents__link toc-highlight">Configure Presence Status Synchronization Rules</a><ul><li><a href="#presence-status-configuration-rules" class="table-of-contents__link toc-highlight">Presence Status Configuration Rules</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.b6dcc330.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.5b32cd97.js"></script>
</body>
</html>