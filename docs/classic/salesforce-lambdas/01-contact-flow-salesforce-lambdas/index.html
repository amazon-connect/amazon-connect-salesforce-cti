<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Invoking the Amazon Connect Salesforce Lambda in a Contact Flow | Amazon Connect Salesforce CTI Adapter</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Invoking the Amazon Connect Salesforce Lambda in a Contact Flow | Amazon Connect Salesforce CTI Adapter"><meta data-rh="true" name="description" content="The Amazon Connect Contact Flow defines the routing behaviour within"><meta data-rh="true" property="og:description" content="The Amazon Connect Contact Flow defines the routing behaviour within"><link data-rh="true" rel="icon" href="/amazon-connect-salesforce-cti/img/favicon.png"><link data-rh="true" rel="canonical" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas" hreflang="en"><link data-rh="true" rel="alternate" href="https://amazon-connect.github.io/amazon-connect-salesforce-cti//amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://UE7MTAXIA1-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Amazon Connect Salesforce CTI Adapter" href="/amazon-connect-salesforce-cti/opensearch.xml"><link rel="stylesheet" href="/amazon-connect-salesforce-cti/assets/css/styles.17ae2b49.css">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/runtime~main.e9141b23.js" as="script">
<link rel="preload" href="/amazon-connect-salesforce-cti/assets/js/main.f5442f39.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/amazon-connect-salesforce-cti/"><div class="navbar__logo"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/amazon-connect-salesforce-cti/img/logo.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">v5.21.0</b></a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/lightning/notices">Lightning</a><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Classic</a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/amazon-connect-salesforce-cti/docs/other/earlier-versions">Earlier Versions</a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/tree/main/pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PDF<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/notices">Notices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/amazon-connect-salesforce-cti/docs/classic/release-notes">Release Notes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Introduction</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/introduction/01-key-benefits-and-requirements">Key Benefits and Requirements</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Installation</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/01-installation">Installing the CTI Adapter and Salesforce Lambdas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/02-guided-setup">Setting Up The CTI Adapter Using Guided Setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/03-managed-package-manual-setup">Setting Up The CTI Adapter Managed Package Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/04-salesforce-lambdas-manual-setup">Setting Up The Salesforce Lambdas Manually</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/05-upgrading-from-an-earlier-version">Upgrading from an Earlier Version</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/installation/06-cti-adapter-installation-troubleshooting">CTI Adapter Installation Troubleshooting and Common Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">CTI Adapter</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/01-cti-adapter-configuration">CTI Adapter Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/02-omnipresence-agent-state-sync">Omnipresence Agent State Sync</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/03-contact-attributes-display">Contact Attributes Display</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/04-call-recording-playback">Call Recording Playback</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/05-call-display-account-page">Call Display on the Account Page</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/06-outbound-campaign-calls">Outbound Campaign Calls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/07-amazon-connect-reports">Amazon Connect Reports in Salesforce</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/08-cti-flows">CTI Flows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/09-localization">Localization</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/10-cti-actions">CTI Actions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/11-recording-controls">Recording Controls</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/12-chat-widget-integration">Chat Widget Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/13-wisdom-integration">Wisdom Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/14-voice-id">Voice Id</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active">Salesforce Lambdas</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/salesforce-lambdas/01-contact-flow-salesforce-lambdas">Invoking the Amazon Connect Salesforce Lambda in a Contact Flow</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link">Appendices</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-a-cti-flow-sources-and-events/01-cti-flow-sources-and-events">Appendix A: CTI Flow Sources and Events</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-b-configuring-salesforce-as-your-identity-provider/01-configuring-salesforce-as-your-identity-provider">Appendix B: Configuring Salesforce as Your Identity Provider</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-c-cti-flow-examples/01-cti-flow-examples">Appendix C: CTI Flow Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-d-cti-flow-blocks/01-cti-flow-blocks">Appendix D: CTI Flow Blocks</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/amazon-connect-salesforce-cti/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Salesforce Lambdas</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Invoking the Amazon Connect Salesforce Lambda in a Contact Flow</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Invoking the Amazon Connect Salesforce Lambda in a Contact Flow</h1></header><p>The Amazon Connect Contact Flow defines the routing behaviour within
Amazon Connect, allowing contact center administrators to customize call
flow behaviour such as playing prompts, invoking Lambda functions for
data lookup, and sending the call to different queues based on various
conditions. As a result, Contact Flows are expected to be highly
customized for each organization. While the Adapter package does not
provide any Contact Flows, there are some best practices that are worth
highlighting when utilizing the Adapter.</p><p>The key element that enables Contact Flow integration is the AWS Lambda
function. A Lambda function is a serverless piece of code that is
invoked by the Contact Flow. Typically, Lambda functions are used to
update or retrieve information from databases or APIs, as well as
integrating with other systems. Lambda function can return any data
processed to the Contact Flow where it can be used for decision making.</p><p>Since Salesforce is highly customizable, the same Salesforce object in a
different environment may have different fields associated with it. As a
result, we can expect objects to have different requirements for how
they are retrieved, updated and created. The CTI Adapter was built to be
able to query Salesforce objects regardless of how they have been
customized. The user of the Adapter must therefore ensure they are
passing the appropriate parameters to the Lambda functions provided as
part of the Adapter.</p><p>The Lambda function supports different operations, based on the
mandatory input parameter &quot;sf_operation&quot;.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-lookup">Salesforce Lookup<a class="hash-link" href="#salesforce-lookup" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;lookup&quot;. In this
case, the Lambda function queries Salesforce for objects based on the
parameters passed to it.</p><ul><li><p>&quot;<strong>sf_object</strong>&quot; parameter contains Salesforce Object, like Case, Contact etc.</p></li><li><p>&quot;<strong>sf_fields</strong>&quot; parameter contains a set of fields to be returned in a result. For example, if we are querying Case, we might specify &quot;Id, IsClosed, Subject&quot;, or if we are querying Contact, we might specify &quot;Id, Name, Email&quot;</p></li><li><p>Specify a conditional parameter, for example &quot;CaseNumber&quot; or &quot;homephone&quot;. Multiple values may be sent and they will be applied with &quot;AND&quot; operator.</p></li></ul><p>In the Amazon Connect Contact Flow Designer, add <em>Integrate <!-- -->&gt;<!-- --> Invoke
AWS Lambda function</em> block. Set &#x27;sfInvokeAPI&#x27; Lambda ARN and make sure
you have granted Amazon Connect to invoke the Lambda Function.</p><p>Example for phone number lookup:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image154.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image155.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image156.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image157.png" class="img_ev3q"><p>A result example:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image158.png" class="img_ev3q"><p>Example for Case lookup:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image159.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image160.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image161.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image162.png" class="img_ev3q"><p>A result example:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image163.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-create">Salesforce Create<a class="hash-link" href="#salesforce-create" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;create&quot;. In this
case, the Lambda function creates a Salesforce object based on the
parameters passed to it.</p><ul><li><p>&quot;<strong>sf_object</strong>&quot; parameter contains Salesforce to be created, like Case.</p></li><li><p>Specify additional parameters for the Salesforce object to be created. Please be sure to include all parameters required to create the Salesforce object.</p></li></ul><p>In the Amazon Connect Contact Flow Designer, add <em>Integrate <!-- -->&gt;<!-- --> Invoke
AWS Lambda function</em> block. Set &#x27;sfInvokeAPI&#x27; Lambda ARN and make sure
you have granted Amazon Connect to invoke the Lambda Function.</p><p>An example for Case creation:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image164.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image165.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image166.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image167.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image168.png" class="img_ev3q"><p>Contact Id is usually received as a result of a previous phone lookup,
but it can be also stored as an Attribute (i.e. sf_contact_id)</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image169.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image170.png" class="img_ev3q"><p>A result example (providing the newly created Case Id):</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image171.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-update">Salesforce Update<a class="hash-link" href="#salesforce-update" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;update&quot;. In this
case, the Lambda function updates a Salesforce object based on the
parameters passed to it.</p><ul><li><p>&quot;<strong>sf_object</strong>&quot; parameter contains Salesforce to be updated, like Case.</p></li><li><p>Specify additional parameters for the Salesforce object to be created. Parameters must include <code>sf_object</code> and <code>sf_id</code>.</p></li></ul><p>In the Amazon Connect Contact Flow Designer, add <em>Integrate <!-- -->&gt;<!-- --> Invoke
AWS Lambda function</em> block. Set &#x27;sfInvokeAPI&#x27; Lambda ARN and make sure
you have granted Amazon Connect to invoke the Lambda Function.</p><p>An example for Case update:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image172.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image173.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image174.png" class="img_ev3q"><p>Case Id is usually received as a result of a previous case lookup, but
it can be also stored as an Attribute (i.e. sf_case_id)</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image175.png" class="img_ev3q"><p>A result example (HTTP Status Code):</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image176.png" class="img_ev3q"><p>204 is &quot;No Content&quot; success code</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-phone-lookup">Salesforce Phone Lookup<a class="hash-link" href="#salesforce-phone-lookup" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;phoneLookup&quot;. In
this case, the Lambda function queries Salesforce for Contacts based on
the parameter passed to it.</p><p>It uses the Salesforce Object Search Language (SOLS) to construct
text-based search queries against the search index, which gives
significant performance improvement when searching phone number fields.</p><ul><li><p>&quot;<strong>sf_phone</strong>&quot; parameter contains the phone number to search.</p></li><li><p>&quot;<strong>sf_fields</strong>&quot; parameter contains a set of fields to be returned in a result. As it searches for Contacts, we might specify &quot;Id, Name, Email&quot;</p></li></ul><p>In the Amazon Connect Contact Flow Designer, add <em>Integrate <!-- -->&gt;<!-- --> Invoke
AWS Lambda function</em> block. Set &#x27;sfInvokeAPI&#x27; Lambda ARN and make sure
you have granted Amazon Connect to invoke the Lambda Function.</p><p>Example for phone number lookup:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image177.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image156.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image178.png" class="img_ev3q"><p>A result example:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image158.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-query">Salesforce query<a class="hash-link" href="#salesforce-query" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;query&quot;. In this
case, the Lambda function uses Salesforce Object Query Language (SOQL)
to conduct a query against the Salesforce instance.</p><ul><li>&quot;<strong>query</strong>&quot; parameter contains the query.</li></ul><p>Any additional parameters will replace text values in the original query
so that queries can be dynamic based on values stored within the contact
flow. For example, the parameter set:</p><ul><li><p>query: &quot;select field from object&quot;</p></li><li><p>field: &quot;Id&quot;</p></li><li><p>object: &quot;Task&quot;</p></li></ul><p>Will result in the query: &quot;select Id from Task&quot;.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image179.png" class="img_ev3q"><p>In the contact flow example below, we look for a customer by phone number.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image180.png" class="img_ev3q"><p>(full text of the value is &quot;select Id from Contact where Phone LIKE \&#x27;%number%\&#x27;&quot;)</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image181.png" class="img_ev3q"><p>This operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00303000001RZfIAAW&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_count&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that <code>sf_count</code> is the count of records matched and not the count of fields in the response. This means all fields that start with <code>sf_records_i_</code> count as one record. If the query above returned the Name as well as the Id and matched more than one record, the response will be:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00303000001RZfIAAW&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Name0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_1_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00303000001RZfIAAE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_1_Name&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Name1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_count&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-queryone">Salesforce queryOne<a class="hash-link" href="#salesforce-queryone" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to &quot;queryOne&quot; (case
sensitive). In this case, the Lambda function uses Salesforce Object
Query Language (SOQL) to conduct a query against the Salesforce
instance, returning a result only when one record is returned from the
query. For query, the following parameter is required:</p><ul><li>&quot;<strong>query</strong>&quot; parameter contains the query.</li></ul><p>Any additional parameters will replace text values in the original query
so that queries can be dynamic based on values stored within the contact
flow. For example, the parameter set:</p><ul><li><p>query: &quot;select field from object&quot;</p></li><li><p>field: &quot;Id&quot;</p></li><li><p>object: &quot;Task&quot;</p></li></ul><p>Will result in the query: &quot;select Id from Task&quot;.</p><p>In the contact flow example below, we look for a customer by phone number.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image179.png" class="img_ev3q"><p>(full text of the value is &quot;select Id from Contact where Phone LIKE
\&#x27;%number%\&#x27;&quot;)</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image181.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image180.png" class="img_ev3q"><p>This operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;00303000001RZfIAAW&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_count&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;1&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-createchatterpost">Salesforce createChatterPost<a class="hash-link" href="#salesforce-createchatterpost" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to
&quot;createChatterPost&quot; (case sensitive). In this case, the Lambda function
uses the Salesforce Connect REST API to create a chatter post (see
<a href="https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/quickreference_post_feed_item.htm" target="_blank" rel="noopener noreferrer">here</a>).
For createChatterPost, the following parameters are required:</p><ul><li><p>sf_feedElementType</p></li><li><p>sf_subjectId</p></li><li><p>sf_messageType</p></li><li><p>sf_message</p></li></ul><p>The following parameter is optional:</p><ul><li>sf_mention</li></ul><p>(refer to the api reference for value types)</p><p>Any additional parameters will replace text values in the sf_message so
that messages can be dynamic based on values stored within the contact
flow. For example, the parameter set:</p><ul><li><p>sf_message: &quot;Please help me with case {{caseId}}&quot;</p></li><li><p>caseId: 1234</p></li></ul><p>Will result in the message: &quot;Please help me with case 1234&quot;.</p><p>In the contact flow example below, we leave a chatter post on a contact.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image182.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image183.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image184.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image185.png" class="img_ev3q"><p>(full text of the value is &quot;I had a problem during the call. My contact id is {{contactId}}.&quot;)</p><p>The operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0D503000000ILY5CAO&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image186.png" class="img_ev3q">the Subject:<h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-createchattercomment">Salesforce createChatterComment<a class="hash-link" href="#salesforce-createchattercomment" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to
&quot;createChatterComment&quot; (case sensitive). In this case, the Lambda
function uses the Salesforce Connect REST to create a chatter comment
(see <a href="https://developer.salesforce.com/docs/atlas.en-us.chatterapi.meta/chatterapi/connect_resources_feed_element_capability_comments_items.htm" target="_blank" rel="noopener noreferrer">here</a>).
For createChatterComment, the following parameters are required:</p><ul><li><p>sf_feedElementId</p></li><li><p>sf_commentType</p></li><li><p>sf_commentMessage</p></li></ul><p>(refer to the api reference for value types)</p><p>Any additional parameters will replace text values in the
sf_commentMessage so that messages can be dynamic based on values stored
within the contact flow. For example, the parameter set:</p><ul><li><p>sf_commentMessage: &quot;Please help me with case {{ caseId }}&quot;</p></li><li><p>caseId: 1234</p></li></ul><p>In the contact flow example below, we leave a comment on a chatter post.</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image187.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image188.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image189.png" class="img_ev3q"><p>The operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0D703000000ChhNCAS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>See the chatter post appear attached to the Subject:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image190.png" class="img_ev3q"><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-search">Salesforce search<a class="hash-link" href="#salesforce-search" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to
&quot;search&quot; (case sensitive). In this case, the Lambda
function uses the Salesforce REST to perform a parameterized search
(see
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_search_parameterized.htm" target="_blank" rel="noopener noreferrer">here</a>).
For search, the following parameters are required:</p><ul><li><p>q</p></li><li><p>sf_fields</p></li><li><p>sf_object</p></li></ul><p>The following parameters are optional:</p><ul><li><p>where</p></li><li><p>overallLimit</p></li></ul><p>See the below example:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image320.png" class="img_ev3q"> 58<img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image321.png" class="img_ev3q"> 59<img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image322.png" class="img_ev3q"> 60<img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image323.png" class="img_ev3q"> 61<img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image324.png" class="img_ev3q"> 62<img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image325.png" class="img_ev3q"> 63<p>The operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;50001000001B9e6AAG&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Subject&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test subject&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_0_Status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;New&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_1_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;50001000001B9eWAAS&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_1_Subject&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test subject&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_1_Status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;New&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_2_Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;50001000001BDgiAAG&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_2_Subject&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test subject&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_records_2_Status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;New&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_count&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note that <code>sf_count</code> is the count of records matched and not the count of fields in the response. This means all fields that start with <code>sf_records_i_</code> count as one record.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="salesforce-searchone">Salesforce searchOne<a class="hash-link" href="#salesforce-searchone" title="Direct link to heading">​</a></h2><p>This operation is invoked by setting &quot;sf_operation&quot; to
&quot;searchOne&quot; (case sensitive). In this case, the Lambda
function uses the Salesforce REST to perform a parameterized search
(see
<a href="https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/resources_search_parameterized.htm" target="_blank" rel="noopener noreferrer">here</a>).
For search, the following parameters are required:</p><ul><li><p>q</p></li><li><p>sf_fields</p></li><li><p>sf_object</p></li></ul><p>The following parameter is optional:</p><ul><li>where</li></ul><p>See the below example:</p><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image326.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image327.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image322.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image323.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image324.png" class="img_ev3q"><img loading="lazy" src="/amazon-connect-salesforce-cti/img/classic/image325.png" class="img_ev3q"><p>The operation returns a response of:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;50001000001BIn6AAG&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Subject&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;test subject unique&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;Status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;New&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;sf_count&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/amazon-connect/amazon-connect-salesforce-cti/docs/classic/04-salesforce-lambdas/01-contact-flow-salesforce-lambdas.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/amazon-connect-salesforce-cti/docs/classic/cti-adapter/14-voice-id"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Voice Id</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/amazon-connect-salesforce-cti/docs/classic/appendices/appendix-a-cti-flow-sources-and-events/01-cti-flow-sources-and-events"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Appendix A: CTI Flow Sources and Events</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#salesforce-lookup" class="table-of-contents__link toc-highlight">Salesforce Lookup</a></li><li><a href="#salesforce-create" class="table-of-contents__link toc-highlight">Salesforce Create</a></li><li><a href="#salesforce-update" class="table-of-contents__link toc-highlight">Salesforce Update</a></li><li><a href="#salesforce-phone-lookup" class="table-of-contents__link toc-highlight">Salesforce Phone Lookup</a></li><li><a href="#salesforce-query" class="table-of-contents__link toc-highlight">Salesforce query</a></li><li><a href="#salesforce-queryone" class="table-of-contents__link toc-highlight">Salesforce queryOne</a></li><li><a href="#salesforce-createchatterpost" class="table-of-contents__link toc-highlight">Salesforce createChatterPost</a></li><li><a href="#salesforce-createchattercomment" class="table-of-contents__link toc-highlight">Salesforce createChatterComment</a></li><li><a href="#salesforce-search" class="table-of-contents__link toc-highlight">Salesforce search</a></li><li><a href="#salesforce-searchone" class="table-of-contents__link toc-highlight">Salesforce searchOne</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Amazon.com, Inc. or its affiliates. All Rights Reserved.</div></div></div></footer></div>
<script src="/amazon-connect-salesforce-cti/assets/js/runtime~main.e9141b23.js"></script>
<script src="/amazon-connect-salesforce-cti/assets/js/main.f5442f39.js"></script>
</body>
</html>